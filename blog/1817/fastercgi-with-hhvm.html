<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:url" content="http://hhvm-cn.com/blog/1817/fastercgi-with-hhvm" />
  <meta property="og:site_name" content="HHVM"/>
  <meta property="og:title" content="FasterCGI with HHVM" />
  <meta property="og:image" content="http://hhvm-cn.com/static/og_image.png" />
  <meta property="og:description" content="Today, we are happy to announce FastCGI support for HHVM. FastCGI is a popular protocol for communication between an application server (e.g. running your PH..." />

  <link rel="stylesheet" href="/css/main.css" media="screen">
  <link rel="icon" href="/static/favicon.png" type="image/x-icon">
  

  <title>FasterCGI with HHVM | HHVM</title>
  <meta name="description" content="Today, we are happy to announce FastCGI support for HHVM. FastCGI is a popular protocol for communication between an application server (e.g. running your PH...">

  <link rel="canonical" href="http://hhvm-cn.com/blog/1817/fastercgi-with-hhvm">
  <link rel="alternate" type="application/rss+xml" title="HHVM" href="http://hhvm-cn.com/feed.xml" />
</head>

  <body class="docsNavVisible">
    <div id="fixed_header" class="fixedHeaderContainer visible">
  <div class="headerWrapper wrapper">
    <header>
      <a href="http://hhvm-cn.com/">
        <img src="/static/logo.svg">
        <h2>HHVM</h2>
      </a>

      <div class="navigationWrapper navigationFull" id="flat_nav">
        <nav class="navigation">
          <ul>
            
              <li class="navItem">
                
                  <a href="https://docs.hhvm-cn.com/hhvm/getting-started/getting-started">安装</a>
                
              </li>
            
              <li class="navItem navItemActive">
                
                  <a href="/blog/">博客</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://docs.hhvm-cn.com/hhvm/">文档</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://github.com/facebook/hhvm">GitHub</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://hacklang-cn.org/">Hack</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="https://www.facebook.com/hhvm/">Facebook</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="https://twitter.com/HipHopVM">Twitter</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://webchat.freenode.net/?channels=hhvm">IRC</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://hhvm.h4cc.de/">模块支持</a>
                
              </li>
            
            
          </ul>
        </nav>
      </div>
      <div class="navigationWrapper navigationSlider" id="navigation_wrap">
        <div id="header_nav">
  <div class="navSlideout">
    <i class="menuExpand" id="header_nav_expander"><span></span><span></span><span></span></i>
  </div>
  <nav class="slidingNav">
    <ul>
      
      <li class="navItem">
        <a href="https://docs.hhvm-cn.com/hhvm/getting-started/getting-started" target="_blank">安装</a>
      </li>
      
      <li class="navItem">
        <a href="/blog/">博客</a>
      </li>
      
      <li class="navItem">
        <a href="http://docs.hhvm-cn.com/hhvm/" target="_blank">文档</a>
      </li>
      
      <li class="navItem">
        <a href="http://github.com/facebook/hhvm" target="_blank">GitHub</a>
      </li>
      
      <li class="navItem">
        <a href="http://hacklang-cn.org/" target="_blank">Hack</a>
      </li>
      
      <li class="navItem">
        <a href="https://www.facebook.com/hhvm/" target="_blank">Facebook</a>
      </li>
      
      <li class="navItem">
        <a href="https://twitter.com/HipHopVM" target="_blank">Twitter</a>
      </li>
      
      <li class="navItem">
        <a href="http://webchat.freenode.net/?channels=hhvm" target="_blank">IRC</a>
      </li>
      
      <li class="navItem">
        <a href="http://hhvm.h4cc.de/" target="_blank">模块支持</a>
      </li>
      
      
    </ul>
  </nav>
</div>
<script>
  var event = document.createEvent('Event');
  event.initEvent('slide', true, true);
  document.addEventListener('slide', function (e) {
    document.body.classList.toggle('sliderActive');
  }, false);
  var headerNav = document.getElementById('header_nav');
  var headerNavExpander = document.getElementById('header_nav_expander');
  headerNavExpander.addEventListener('click', function(e) {
    headerNav.classList.toggle('navSlideoutActive');
    document.dispatchEvent(event);
  }, false);
</script>
      </div>
    </header>
  </div>
</div>

    <div class="navPusher">
      <div class="docMainWrapper wrapper">
      <div class="docsNavContainer">
  <nav class="toc" id="doc_nav">
    <div class="toggleNav" id="collection_nav">
      <section class="navWrapper wrapper">
        <div class="navBreadcrumb wrapper">
          <div class="navToggle" id="collection_nav_toggler">
            <i></i>
          </div>
          <h2>
            <a href="/blog/">Blog</a>
            
          </h2>
        </div>
        <div class="navGroups">
          
            
            
            <div class="navGroup navGroupActive navGroupCurrent">
  <h3><i>+</i><span>All Posts</span></h3>
  <ul>
    
      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/05/04/hhvm-4.56.html">HHVM 4.56</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/30/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/29/hhvm-4.55.html">HHVM 4.55</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/21/hhvm-4.54.html">HHVM 4.54</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/13/hhvm-4.53.html">HHVM 4.53</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/07/hhvm-4.52.html">HHVM 4.52</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/31/hhvm-4.51.html">HHVM 4.51</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/24/hhvm-4.50.html">HHVM 4.50</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/18/hhvm-4.49.html">HHVM 4.49</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/09/hhvm-4.48.html">HHVM 4.48</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/03/hhvm-4.47.html">HHVM 4.47</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/24/hhvm-4.46.html">HHVM 4.46</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/20/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/19/hhvm-4.45.html">HHVM 4.45</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/10/hhvm-4.44.html">HHVM 4.44</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/03/hhvm-4.43.html">HHVM 4.43</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/27/hhvm-4.42.html">HHVM 4.42</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/21/hhvm-4.41.html">HHVM 4.41</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/13/hhvm-4.40.html">HHVM 4.40</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/07/hhvm-4.39.html">HHVM 4.39</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/02/hhvm-4.38.html">HHVM 4.38</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/12/17/cancelling-hhvm-4.37.html">Holiday schedule: cancelling HHVM 4.37</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/12/16/hhvm-4.36.html">HHVM 4.36</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/12/10/hhvm-4.35.html">HHVM 4.35</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/12/02/hhvm-4.34.html">HHVM 4.34</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/25/hhvm-4.33.html">HHVM 4.33</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/19/hhvm-4.32.html">HHVM 4.32 (LTS)</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/19/distribution-support.html">Support lifecycle for older distributions</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/11/hhvm-4.31.html">HHVM 4.31.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/06/hhvm-4.30.html">HHVM 4.30.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/29/hhvm-4.29.html">HHVM 4.29.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/28/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/23/hhvm-4.28.html">HHVM 4.28</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/14/hhvm-4.27.0.html">HHVM 4.27.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/09/hhvm-4.26.0.html">HHVM 4.26.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/01/deprecating-references.html">Deprecating &$references</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/30/hhvm-4.25.0.html">HHVM 4.25.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/25/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/23/hhvm-4.24.0.html">HHVM 4.24.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/17/hhvm-4.23.0.html">HHVM 4.23.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/09/hhvm-4.22.0.html">HHVM 4.22.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/03/the-hhvm-4.21.0.html">HHVM 4.21.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/03/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/27/hhvm-4.20.0.html">HHVM 4.20.0 and 4.20.1</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/19/hhvm-4.19.0.html">HHVM 4.19.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/14/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/12/hhvm-4.18.0.html">HHVM 4.18.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/07/bugfixes.html">Bugfixes for 3.30, 4.8, and 4.12-17</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/05/hhvm-4.17.0.html">HHVM 4.17.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/29/hhvm-4.16.0.html">HHVM 4.16.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/22/hhvm-4.15.0.html">HHVM 4.15.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/15/hhvm-4.14.0.html">HHVM 4.14.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/09/hhvm-4.13.0.html">HHVM 4.13.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/01/hhvm-4.12.0.html">HHVM 4.12.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/24/hhvm-4.11.0.html">HHVM 4.11.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/18/hhvm-4.10.0.html">HHVM 4.10.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/13/hhvm-4.9.1.html">HHVM 4.9.1, repository changes</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/10/hhvm-4.9.0.html">HHVM 4.9.0, and security updates for 3.30, and 4.3-4.7</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/03/hhvm-4.8.0.html">HHVM 4.8.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/05/28/hhvm-4.7.0.html">HHVM 4.7.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/05/21/hhvm-4.6.0.html">HHVM 4.6.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/05/13/hhvm-4.5.0.html">HHVM 4.5.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/05/06/hhvm-4.4.0.html">HHVM 4.4.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/04/30/hhvm-4.3.0.html">HHVM 4.3.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/04/23/hhvm-4.2.0.html">HHVM 4.2.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/04/09/hhvm-4.1.0.html">HHVM 4.1.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/04/03/hhvm-4.0.4.html">HHVM 4.0.4, 3.30.5, and 3.27.8</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/28/hhvm-4.0.3.html">HHVM 4.0.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/19/hhvm-4.0.2.html">HHVM 4.0.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/14/hhvm-4.0.1.html">HHVM 4.0.1, 3.30.4, and 3.27.7: CVE-2019-3552</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/11/hhvm-4.0.0.html">HHVM 4.0.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/01/hhvm-3.30.3.html">HHVM 3.30.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/01/14/hhvm-3.30.2.html">HHVM 3.30.2 and 3.27.6</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/12/18/hhvm-3.30.1.html">HHVM 3.30.1 and 3.27.5</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/12/17/hhvm-3.30.html">HHVM 3.30</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/10/30/hhvm-3.29.1.html">HHVM 3.29.1 and 3.27.4</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/10/22/hhvm-3.29.html">HHVM 3.29</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/10/01/hhvm-3.28.3.html">HHVM 3.28.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/09/28/hhvm-3.28.2.html">HHVM 3.28.2 and 3.27.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/09/26/introducing-hacktest.html">Introducing HackTest</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/09/12/end-of-php-support-future-of-hack.html">Ending PHP Support, and The Future Of Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/08/30/hhvm-3.28.1.html">HHVM 3.28.1</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/08/28/hhvm-3.28.0.html">HHVM 3.28.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/08/15/hhvm-3.27.2.html">HHVM 3.27.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/07/19/hhvm-3.27.1.html">HHVM 3.27.1 and 3.24.8</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/06/18/hhvm-3.27.0.html">HHVM 3.27.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/24/hhvm-3.26.3.html">HHVM 3.26.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/15/hhvm-3.26.2.html">HHVM 3.26.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/11/hhvm-3.26.1.html">HHVM 3.26.1</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/07/hhvm-3.26.html">HHVM 3.26 - Introducing HackC</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/04/hhvm-3.25.3.html">HHVM 3.25.3, HHVM 3.24.7, and 3.21.11</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/04/11/relicensing-hack.html">Relicensing Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/03/30/hhvm-3.25.2.html">HHVM 3.25.2, HHVM 3.24.6, and 3.21.10 (CVE-2018-6334)</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/03/22/hhvm-3.25.1.html">HHVM 3.25.1, HHVM 3.24.5, and 3.21.9</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/03/15/hhvm-3.25.html">HHVM 3.25.0, 3.24.4, and 3.21.8</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/03/02/hhvm-3.24.3.html">HHVM 3.24.3 and 3.21.7</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/02/07/hhvm-3.24.2.html">HHVM 3.24.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/01/30/hhvm-3.24.1.html">HHVM 3.24.1, 3.21.6, and 3.18.8</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/01/16/hhvm-3.24.html">HHVM 3.24</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/01/12/hhvm-3.23.4.html">HHVM 3.23.4, 3.21.5, and 3.18.7</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/01/02/hhvm-3.23.3.html">HHVM 3.23.3, 3.21.4, and 3.18.6</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/11/17/hhvm-3-23.html">HHVM 3.23</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/11/14/gpg-key-migration.html">GPG Key Migration</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/10/26/the-hack-standard-library-1-0.html">The Hack Standard Library: v1.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/09/26/hhvm-3-22.html">HHVM 3.22</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/09/18/the-future-of-hhvm.html">The Future of HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/08/02/hhvm-3-21.html">HHVM 3.21</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/06/07/hhvm-3-20.html">HHVM 3.20</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/04/13/hhvm-3-19.html">HHVM 3.19</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/03/23/concurrent-jit-compilation.html">Concurrent JIT Compilation</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/03/09/how-the-cyber-elephant-got-his-arm.html">How the Cyber-Elephant Got His ARM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/02/17/region-jit.html">HHVM's Profile-guided Region JIT</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/02/15/hhvm-3-18.html">HHVM 3.18</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/01/26/new-year-new-me.html">New Year, New Me</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/11711/hhvm-3-15">HHVM 3.15</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10925/improved-user-documentation">Improved User Documentation</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10859/php-7-support">PHP 7 Support</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10649/improving-arrays-in-hack">Improving Arrays in Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10205/llvm-code-generation-in-hhvm">LLVM Code Generation in HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10379/hhvm-3-10-0">HHVM 3.10.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10043/experimental-mac-os-x-support">Experimental Mac OS X Support</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9995/hhvm-3-9-0">HHVM 3.9.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9803/hhvm-3-8-0">HHVM 3.8.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9773/cve-2015-4663">CVE-2015-4663</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9581/trait-and-interface-requirements-in-hack">Trait and interface requirements in Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9293/lockdown-results-and-hhvm-performance">Lockdown Results and HHVM Performance</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9215/covariance-contravariance-and-super-type-constraints">Covariance, Contravariance, and super Type Constraints</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9089/hhvm-lockdown">HHVM Lockdown</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9059/hhvm-3-7-0">HHVM 3.7.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8981/announcing-our-book-hack-hhvm">Announcing our book: “Hack & HHVM”</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8939/etsys-transition-to-hhvm">Etsy's Transition to HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8849/hhvm-3-6-0">HHVM 3.6.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8537/announcing-a-specification-for-hack">Announcing a Specification for Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8405/coming-soon-in-hhvm">Coming Soon in HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/7637/hhvm-3-5-0">HHVM 3.5.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/7205/wikipedia-on-hhvm">Wikipedia on HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/7349/lts-updates">LTS Updates</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/7091/async-cooperative-multitasking-for-hack">Async - Cooperative Multitasking for Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6989/wp-engine-and-box-now-use-hhvm">WP Engine and Box now use HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6899/hhvm-3-4-0">HHVM 3.4.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6863/announcing-the-hack-transpiler">Announcing the Hack Transpiler</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6473/hack-overriding-constructors-new-static-and-__consistentconstruct">Hack: Overriding Constructors, "new static", and __ConsistentConstruct</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6767/hhvm-3-3-1">HHVM 3.3.1</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6515/using-xhp-with-bootstrap">Using XHP with Bootstrap</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6443/hack-recent-updates">Hack: Recent Updates</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6323/the-journey-of-a-thousand-bytecodes">The Journey of a Thousand Bytecodes</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6239/hhvm-3-3-0">HHVM 3.3.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6083/hhvm-long-term-support">HHVM Long Term Support</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6005/hack-community-roundup-3">Hack Community Roundup #3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5723/announcing-a-specification-for-php">Announcing a specification for PHP</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5609/hhvm-3-2-0">HHVM 3.2.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5399/faster-github-commits">Faster GitHub Commits</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5429/hack-community-roundup-2">Hack Community Roundup #2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5195/hhvm-3-1-0">HHVM 3.1.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4811/hack-community-roundup">Hack Community Roundup</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4841/compatibility-update">Compatibility Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4685/hack-developer-day-2014-keep-hacking">Hack Developer Day 2014: Keep Hacking</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4601/debug-packages">Debug Packages</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4349/hhvm-3-0-0">HHVM 3.0.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4325/hacking-hack-on-heroku">Hacking Hack on Heroku</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4223/introducing-hack-a-programming-language-for-hhvm">Introducing Hack - A Programming Language for HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4103/hhvm-2-4-2">HHVM 2.4.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3611/tracking-parity">Tracking Parity</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3689/implementing-mysqli">Implementing MySQLi</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3743/hhvm-the-next-six-months">HHVM: The Next Six Months</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3287/hhvm-2-4-0">HHVM 2.4.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3203/nightly-packages">Nightly Packages</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2813/we-are-the-98-5-and-the-16">We are the 98.5% (and the 16%)</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/1817/fastercgi-with-hhvm">FasterCGI with HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2393/hhvm-2-3-0-and-travis-ci">HHVM 2.3.0 and Travis CI</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2027/faster-and-cheaper-the-evolution-of-the-hhvm-jit">Faster and Cheaper: The Evolution of the hhvm JIT</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/1499/locking-down-for-performance-and-parity">Locking Down for Performance and Parity </a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/1379/hhvm-on-heroku">HHVM on Heroku</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/1301/hhvm-2-2-0">HHVM 2.2.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/875/wow-hhvm-is-fast-too-bad-it-doesnt-run-my-code">Wow HHVM is fast...too bad it doesn’t run my code</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/713/hhvm-optimization-tips">HHVM Optimization Tips</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/575/joining-retirement-testing-and-bankruptcy">Joining, Retirement, Testing, and Bankruptcy</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/521/the-adminserver">The AdminServer</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/431/on-garbage-collection">On Garbage Collection</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/401/spammers-are-still-a-thing-it-seems">Spammers are still a thing, it seems</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/311/adding-an-opcode-to-hhbc">Adding an opcode to HHBC</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4061/go-faster">Go Faster!</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3095/getting-wordpress-running-on-hhvm">Getting WordPress running on HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3089/wordpress-3-4-2-running-on-hiphop-hhvm">WordPress 3.4.2 running on HHVM</a></li>

      
    
  </ul>
</div>
          
        </div>
      </section>
    </div>
  </nav>
</div>
<script>
  var docsevent = document.createEvent('Event');
  docsevent.initEvent('docs_slide', true, true);
  document.addEventListener('docs_slide', function (e) {
    document.body.classList.toggle('docsSliderActive');
  }, false);

  var collectionNav = document.getElementById('collection_nav');
  var collectionNavToggler = 
    document.getElementById('collection_nav_toggler');
  collectionNavToggler.addEventListener('click', function(e) {
    collectionNav.classList.toggle('toggleNavActive');
    document.dispatchEvent(docsevent);
  });

  var groups = document.getElementsByClassName('navGroup');
  for(var i = 0; i < groups.length; i++) {
    var thisGroup = groups[i];
    thisGroup.onclick = function() {
      for(var j = 0; j < groups.length; j++) {
        var group = groups[j];
        group.classList.remove('navGroupActive');
      }
      this.classList.add('navGroupActive');
    }
  }
</script>


      <div class="mainContainer blogContainer postContainer">
  <div id="main_wrap" class="wrapper mainWrapper">
    <div class="lonePost">
<div class="post">
  
  <header class="post-header">
    
    <div class="authorPhoto">
      <img src="https://graph.facebook.com/659488068/picture/" alt="" title="" />
    </div>
    
    
    <p class="post-authorName">Julek Kopczewski</p>
    
    <h1 class="post-title">FasterCGI with HHVM</h1>
    <p class="post-meta">Posted December 17, 2013</p>
  </header>

  <article class="post-content">
  
    <p>Today, we are happy to announce <a href="http://www.fastcgi.com/drupal/">FastCGI</a> support for HHVM. FastCGI is a popular protocol for communication between an application server (e.g. running your PHP code) and a webserver. With support for FastCGI, you will be able to run HHVM behind any <a href="http://en.wikipedia.org/wiki/FastCGI#Web_Servers_that_implement_FastCGI">popular web server</a> (Apache, Nginx, Lighttpd, etc). The webserver is in charge of handling all the intricate details of the HTTP protocol. HHVM is in charge of what it does best, running PHP code blazingly fast.</p>

<!--truncate-->

<p>If you can’t wait to get your hands on the new feature, just jump to the Installation section. If you are curious about how the new feature was baked into HHVM or just want to learn how well it performs, read on.</p>

<h1 id="how-it-works">How it works</h1>

<p>FastCGI was designed to solve one crucial problem that plagued its predecessor CGI, namely: performance. The CGI protocol required that a new instance of the application be spawned on every request. Such a trade-off could have been tolerable for small native programs where start-up overhead was negligible. It is however incredibly difficult for a JIT compiler such as HHVM. The HipHop virtual machine keeps track of the code that ran in the past and reuses bytecode output whenever it sees a known file. HHVM also performs just-in-time compilation, i.e. translates snippets of the bytecode into native machine code when they are run frequently. Both of these features require that an instance of HHVM runs in server mode and lives on from request to request. FastCGI protocol enables that. Moreover, FastCGI can be configured to reuse the same connection for serving multiple requests. This involves serving both requests coming one after another and serving multiple requests in parallel. In the latter case data from multiple requests is multiplexed on a single connection.</p>

<p>HHVM FastCGI server uses asynchronous I/O. This means that an I/O thread will never block waiting on a single connection. Instead, system routines such as select() are used to monitor activity on multiple connections at once. When activity is detected (e.g. file descriptor becomes ready for reading or writing), an I/O thread executes the appropriate non-blocking action. This completes a single cycle of the event loop. This approach maximizes CPU use when serving I/O. Consequently, the threads spend only as much time blocked as absolutely necessary. I/O is served using multiple threads. Once the server is under heavy load, there will roughly be one I/O thread per CPU core. The incoming connections are then distributed evenly between the I/O threads using a round robin. As a result, operations on a single connection are always single-threaded and no additional synchronisation is needed.</p>

<p>A separate set of worker threads is used to execute PHP code. All the (partially) decoded requests are put inside a common concurrent queue. In a loop, each worker thread then pops a new request to be served. At this point, all the request headers are ready. For small requests, the request body will also typically be available. When a request is large (e.g. is a file upload), the worker thread might block waiting on more I/O to become available. The payload can be stored to a file in order to keep memory usage low. Once all the request data becomes available, PHP execution may begin. The output produced by a PHP script is buffered and sent to an I/O thread for further handling.</p>

<h1 id="performance">Performance</h1>

<p>We conducted benchmarks using Nginx. In the first test we ran a Wordpress instance. The second test showcases HHVM performance for computation-intensive tasks. We used a simple php script computing Fibonacci numbers.</p>

<h2 id="wordpress">Wordpress</h2>

<p>The first test was performed using the Wordpress example page. No changes were made to the wordpress deployment besides filling in mandatory database connection fields. Nginx was used as a web server. Apache bench was used for load testing using this command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ab -c 50 -n 1000 http://localhost/wordpress/wordpress/?p=1
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="php-fpm">PHP-FPM</h3>

<p>Sadly the results were pretty bad for PHP. Only 23 requests per second seem to indicate that Wordpress is computationally very expensive to run in an interpreter.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>Requests per second: 23.17 [#/sec] (mean)
Time per request:    2157.579 [ms] (mean)
Time per request:    43.152 [ms] (mean, across all concurrent requests)
Transfer rate:       275.42 [Kbytes/sec] received
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="hhvm-fastcgi">HHVM FastCGI</h3>

<p>On a cold start, HHVM still performed much better than PHP-FPM; however, there was a clear penalty associated with the initial JITing of PHP files:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>Requests per second: 184.71 [#/sec] (mean)
Time per request:    270.689 [ms] (mean)
Time per request:    5.414 [ms] (mean, across all concurrent requests)
Transfer rate:       2194.38 [Kbytes/sec] received
</pre></td></tr></tbody></table></code></pre></div></div>

<p>After the initial warm-up the results got noticeably better:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>Requests per second: 949.21 [#/sec] (mean)
Time per request:    52.676 [ms] (mean)
Time per request:    1.054 [ms] (mean, across all concurrent requests)
Transfer rate:       11276.46 [Kbytes/sec] received
</pre></td></tr></tbody></table></code></pre></div></div>

<p>That’s a surprisingly good result of roughly 40x higher throughput than the default PHP-FPM setting.</p>

<h2 id="fibonacci">Fibonacci</h2>

<p>Next we decided to compare the two runtimes using a computationally expensive example. We wrote a simple function computing Fibonacci numbers using an exponential algorithm. Here are the results for computing Fib(N) for value N = 5, 15, 25, 30:</p>

<h3 id="php-fpm-1">PHP-FPM</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>Requests per second: 13789.24 [#/sec] (mean) Fib(5)
Requests per second: 3202.31 [#/sec] (mean)  Fib(15)
Requests per second: 118.94 [#/sec] (mean)   Fib(25)*
Requests per second: 8.40 [#/sec] (mean)     Fib(30)**
</pre></td></tr></tbody></table></code></pre></div></div>

<p>*only 1000 requests were performed to save time</p>

<p>**only 100 requests were performed to save time</p>

<h3 id="hhvm-fastcgi-1">HHVM FastCGI</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>Requests per second: 8842.70 [#/sec] (mean) Fib(5)
Requests per second: 8892.66 [#/sec] (mean) Fib(15)
Requests per second: 5581.37 [#/sec] (mean) Fib(25)
Requests per second: 737.56 [#/sec] (mean)  Fib(30)
</pre></td></tr></tbody></table></code></pre></div></div>

<p>In case where N = 5, the page required almost no computation at all. In this case it was visible just how well optimized FPM really is. It was over 50% faster than HHVM FastCGI server which indicates that there is still a lot of room for improvement in our implementation. However at N = 15 the amount of computation already shifted the balance to HHVM’s advantage. Where for HHVM the bottleneck was still the network, FPM was clearly CPU bound at this point with a result almost 3x worse than HHVM. At N = 30, HHVM just in time compilation really shined, yielding results almost 80x faster than PHP.</p>

<h1 id="installation">Installation</h1>

<p>Now to the fun part: how to get HHVM FastCGI working on your machine? For popular Debian-based distros we prepared a set of pre-built packages:</p>

<h3 id="ubuntu-1204">Ubuntu 12.04</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>echo deb http://dl.hhvm.com/ubuntu precise main | sudo tee /etc/apt/sources.list.d/hhvm.list
sudo apt-get update
sudo apt-get install hhvm
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ubuntu-1310">Ubuntu 13.10</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>echo deb http://dl.hhvm.com/ubuntu saucy main | sudo tee /etc/apt/sources.list.d/hhvm.list
sudo apt-get update
sudo apt-get install hhvm
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="debian-7">Debian 7</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>echo deb http://dl.hhvm.com/debian wheezy main | sudo tee /etc/apt/sources.list.d/hhvm.list
sudo apt-get update
sudo apt-get install hhvm
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="other">Other</h3>

<p>If your distro is not on the list, you can still run HHVM FastCGI, with slightly more work (or you can take the scripts from that package and repackage it for your distro). First, install the <a href="https://github.com/facebook/hhvm/wiki#installing-pre-built-packages-for-hhvm">latest release of HHVM</a>. To run the server in FastCGI mode, pass additional parameters to HHVM runtime:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>cd /path/to/your/www/root
hhvm --mode server -vServer.Type=fastcgi -vServer.Port=9000
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The server will now accept connections on localhost:9000 (only TCP sockets are supported for now). To turn the server into a daemon, change the value of mode to:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>hhvm --mode daemon -vServer.Type=fastcgi -vServer.Port=9000
</pre></td></tr></tbody></table></code></pre></div></div>

<p>All the usual options accepted by the HHVM runtime are also available in the FastCGI mode. Please make sure that HHVM runs from the directory where you wish to serve PHP files.</p>

<p>Once the HHVM FastCGI server is up and running, it’s time to appropriately configure your webserver of choice. As an example, we include instructions for Apache and Nginx.</p>

<h2 id="making-it-work-with-apache">Making it work with Apache</h2>

<p>The recommended way of integrating with Apache is using the mod_proxy_fcgi module. First, you need to enable mod_proxy and mod_proxy_fcgi modules, if you haven’t done so already. To enable the modules make sure you have the following symlinks created:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>cd /path/to/your/apache/conf
ln -s ../mods-available/mod_proxy.load mods-enabled/mod_proxy.load
ln -s ../mods-available/mod_proxy.conf mods-enabled/mod_proxy.conf
ln -s ../mods-available/mod_proxy_fcgi.load mods-enabled/mod_proxy_fcgi.load
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Next up, you need to insert a directive instructing Apache to send traffic to the FastCGI server. You can do so by inserting the following line in your apache.conf / httpd.conf file.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ProxyPass / fcgi://127.0.0.1:9000/path/to/your/www/root/goes/here/
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Please note that this will route <em>all</em> the traffic to the FastCGI server. If you want to route only certain requests (e.g. only those from a subdirectory or ending *.php, you can use ProxyPassMatch, e.g.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ProxyPassMatch ^/(.*.php(/.*)?)$ fcgi://127.0.0.1:9000/path/to/your/www/root/goes/here/$1
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Consult <a href="http://httpd.apache.org/docs/trunk/mod/mod_proxy_fcgi.html">Apache docs</a> for more details on how to use ProxyPass and ProxyPassMatch.</p>

<h2 id="making-it-work-with-nginx">Making it work with Nginx</h2>

<p>The default FastCGI configuration from Nginx should work just fine with HHVM FastCGI. You will need to add the following directives inside one of your location directives:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>root /path/to/your/www/root/goes/here;
fastcgi_pass   127.0.0.1:9000;
fastcgi_index  index.php;
fastcgi_param  SCRIPT_FILENAME /path/to/your/www/root/goes/here$fastcgi_script_name;
include        fastcgi_params;
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The traffic for the surrounding location directive will then be routed to HHVM.</p>

<h1 id="whats-next">What’s next?</h1>

<p>There are a couple of important features still missing from the initial implementation. The most notable is support for local UNIX sockets. At present, only less performant (however more flexible) TCP sockets are available. The priorities for this release were:</p>

<ul>
  <li>
    <p>Correctness,</p>
  </li>
  <li>
    <p>Getting the architecture of the solution right, so that performance can be improved in the future.</p>
  </li>
</ul>

<p>We haven’t really done any profiling on the new server yet. It is therefore quite likely that there is some low hanging fruit waiting to be picked. We are definitely looking forward to improving HHVM FastCGI performance in the future releases.</p>

    
      
      
        
          <h3> Comments </h3>
          <br/>
          <ul>
          
        
        <li><b>Robert Lidberg</b>: This is so useful! Thanks!
Will benchmark for comparison later this week.</li>
      
        
        <li><b>Joseph Scott</b>: Did the PHP-FPM tests use an opcode cache? Which version of PHP did the PHP-FPM tests use?</li>
      
        
        <li><b>klausi</b>: "The following php.ini and php-fpm.ini files were used. " ==> where are those files?

Did you run the PHP-FPM benchmark without an opcode cache? Then the results are broing, please repeat with APC enabled and clarify that in the post.</li>
      
        
        <li><b>iwankgb</b>: I would love to know it too. Another interesting comparison could include hhvm+fastcgi+webserver and hhvm on its own.</li>
      
        
        <li><b>Paul Tarjan</b>: Juliusz is currently back home in Poland and fast asleep. I'll get him to reply as soon as he gets up.

If you want to re-create the benchmarks I'll happily link to your post.</li>
      
        
        <li><b>Sandeep</b>: Thanks for the update. Benchmarks are good and exiting. Could you please provide the php and hhvm configurations you ran the test?? Anyway hhvm is promising.</li>
      
        
        <li><b>Nick</b>: I notice that in your examples, the HHVM appears to be serving one single site - will fcgi work across multiple virtual hosts, or will it require a single instance per?

I know the SCRIPT_FILENAME can be changed in nginx to not use a hardcoded filename</li>
      
        
        <li><b>Paul Tarjan</b>: The author says yes: https:&#47;&#47;news.ycombinator.com&#47;item?id=6925278</li>
      
        
        <li><b>Paul Tarjan</b>: It should work exactly the same as PHP FPM, so yes, it can host many sites.</li>
      
        
        <li><b>HHVM 2.3.0 and Travis CI &laquo; HipHop Virtual Machine</b>: [&#8230;] We released a new version of HHVM today. This one includes all the hard work from our lockdown (detailed post to follow) and the ability to use HHVM with FastCGI. [&#8230;]</li>
      
        
        <li><b>Nick</b>: Awesome! I figured it would, but I wanted to make sure!</li>
      
        
        <li><b>Nick</b>: Awesome! 

Huge shout out to you guys, this is pretty awesome! I've fiddled with HHVM before, but I'm super excited about this! Thanks!</li>
      
        
        <li><b>Oskar Hane</b>: This is great, thanks guys!
Can't wait to try this.</li>
      
        
        <li><b>Simon</b>: This looks very promising, looking forward to undertaking some performance benchmarks myself :)</li>
      
        
        <li><b>Julius Kopczewski</b>: Cool, I would like to link to other benchmarks, so please go ahead.</li>
      
        
        <li><b>Julius Kopczewski</b>: So, yea, that was the first thing I checked after I run the results the first time. It was enabled in php.ini.

After giving it some thought, the only other thing that could possibly influence the results would be the compilation flags. I followed the official building from source instructions, however I could have screwed it up obviously.

Please, feel free to roll your own benchmarks and we will link to them from the blog post.</li>
      
        
        <li><b>Julius Kopczewski</b>: Heh, yea. I wanted to post the files, then it turned out we don't have a good thing for posting the files so I forgot to do that.

Let me tell what I did instead. I used the default php.ini file that came along with the PHP version that was released around September. I then made sure that opcode cache is enabled and it was. I remember retrying with it enabled explicitly.</li>
      
        
        <li><b>Julius Kopczewski</b>: php.ini file was the one that comes bundled with PHP sources. I just made sure that opcode cache is enabled. I did not make any tweaks to the HHVM configuration so I believe it would be equivalent to what comes with the OSS sources.</li>
      
        
        <li><b>David Carrero</b>: I&acute;ll try in plesk installation, do you test this ?</li>
      
        
        <li><b>N1</b>: Nice, got my symfony2 app running with hhvm-fastcgi :-) Only missing piece for full support seems to be Intl&#47;ICU.</li>
      
        
        <li><b>Julius Kopczewski</b>: I ran HHVM as a webserver too. It is quite capable, since it's what runs FB in production. In terms of I&#47;O performance it seemed to do just slightly better than PHP-FPM + nginx. By that I mean that for "hello world" sites it would deliver about 10-15% better throughput.</li>
      
        
        <li><b>Robin</b>: Will you be able to provide a working vagrant box (or something like that) so the complete config is available as a working set somewhere?) This would more easily allow other projects to have a running start into checking hhvm compat as well as looking at a complete working example of the config+hhvm+project etc!

Looking forward to it!</li>
      
        
        <li><b>Josh Koenig</b>: Getting 20 req&#47;sec from a simple WP install sounds like there was no opcode cache enabled. 

If so, these benchmarks aren't very meaningful. :</li>
      
        
        <li><b>Joel Marcey</b>: Hi Josh -- opcode cache was turned on. This should hopefully clear things up a bit: https:&#47;&#47;news.ycombinator.com&#47;item?id=6925278</li>
      
        
        <li><b>panzi</b>: You could make a github gist and embed it in the article.</li>
      
        
        <li><b>Julius Kopczewski</b>: I would welcome any independent tests. I will also ask Paul to try to replicate the results independently. If they don't match, I will update the post with the new results. I will also link to any independent benchmarks that you post in the comments.</li>
      
        
        <li><b>Wolf</b>: I am getting the following error on CentOS. Does anyone know what might be causing it?

upstream sent unsupported FastCGI protocol version: 72 while reading response header from upstream

I am running hhvm as a daemon on port 9000 and copied the NGinx config here.</li>
      
        
        <li><b>Miguel Clara</b>: I was tried to test this with nginx, but can't get past "Not found"

location ~ .php$ {
                fastcgi_param SCRIPT_FILENAME   &#47;var&#47;www&#47;blog$fastcgi_script_name;
                fastcgi_pass                    127.0.0.1:9000;
                fastcgi_index                   index.php;
                include &#47;etc&#47;nginx&#47;fastcgi_params;
        }</li>
      
        
        <li><b>diego</b>: Hi, on my Ubuntu 12.04 there is only apache2.2 from repos, but for mod_proxy_fcgi I need 2.4. Have you tested this on 12.04? Have you custom build apache2.4?</li>
      
        
        <li><b>Miguel Clara</b>: *I was trying!

Btw "root" is defined previous to the .php location, forgot to mention that!</li>
      
        
        <li><b>lubosdz</b>: I also doubt about objectiveness of these benchmarks. 20 requests per sec is something wrong with environment setup. Also configuration (socket unix&#47;tcp) may give different results. Even though HHVM is probably nicely performative, yet independent professional benchmarks would be more welcome, sorry :-)</li>
      
        
        <li><b>Las</b>: Same, how did you resolve it?</li>
      
        
        <li><b>Julius Kopczewski</b>: Please submit a bug report indicating what happens exactly. This might be an easy fix, provided it's a problem.</li>
      
        
        <li><b>Paul Tarjan</b>: This is when you forget to start HHVM with the "-vServer.Type=fastcgi" option. Your sever is responding with normal "HTTP 1&#47;.0" header instead of the binary protocol.</li>
      
        
        <li><b>Miguel Clara</b>: I was using the "hhvm-fastcgi" init script from ubuntu which points to a config file already create.

using the shell command *AFTER* cd into the root dir it worked!

This makes me wonder however how should I handle multiple sites... like we do with php-fpm pools, but I guess I'll have to read more about that!

I wasn't able to run ab tests though.... hhvm process crashes...

I see this is the log:
perf_event_open failed with: No such file or directory
perf_event_open failed with: No such file or directory
perf_event_open failed with: No such file or directory
receiving index.php</li>
      
        
        <li><b>Carlos Icaza</b>: I tried to install using repository technique, but the package is missing for i386 architecture... Debian 7.2 - VirtualBox</li>
      
        
        <li><b>HHVM f&aring;r FastCGI support - GOTCHA</b>: [&#8230;] Du kan l&aelig;se meget mere og se benchmark testene her. [&#8230;]</li>
      
        
        <li><b>Paul Tarjan</b>: We don't support i386</li>
      
        
        <li><b>Andy</b>: Could you post the hhvm-fastcgi init script ?</li>
      
        
        <li><b>Naveen Valecha</b>: Thanks for the sharing this.Have anyone implemented it on windows server.</li>
      
        
        <li><b>Paul Tarjan</b>: https:&#47;&#47;github.com&#47;hhvm&#47;packaging&#47;blob&#47;master&#47;hhvm_fastcgi&#47;root&#47;etc&#47;init.d&#47;hhvm-fastcgi</li>
      
        
        <li><b>Sang Le</b>: When will it support multiple instance. Example support for multiple site of apache or nginx.

Current it hardcode in the &#47;etc&#47;hhvm&#47;server.hdf, so i should copy the init.d script to another, define another port + document root for other site.</li>
      
        
        <li><b>Mike</b>: Its the one that comes with the ubuntu package!</li>
      
        
        <li><b>Paul Tarjan</b>: I just released 2.3.2 which should fix the issue.</li>
      
        
        <li><b>Zack Gomez</b>: Hi Paul,

When will 2.3.2 prebuilt unbuntu packages be pushed?</li>
      
        
        <li><b>Paul Tarjan</b>: I pushed them yesterday about 12 hours ago.</li>
      
        
        <li><b>Random Lists &raquo; PHP 5.5 vs HHVM vs Node.js</b>: [&#8230;] the HHVM team used the Fibonacci benchmark (http:&#47;&#47;www.hhvm.com&#47;blog&#47;1817&#47;fastercgi-with-hhvm) I tried the same. What I did was vary the number of fibonacci numbers computed and measured the [&#8230;]</li>
      
        
        <li><b>Neil Girardi</b>: Hi,

On Ubuntu 13.10 after running sudo apt-get install hhvm-fastcgi I get "E: Unable to locate package hhvm-fastcgi"</li>
      
        
        <li><b>Paul Tarjan</b>: Sorry, I broke it when I shipped 2.3.2. It is fixed now.</li>
      
        
        <li><b>Sandeep</b>: Thank you. I just want to be sure about opcode cache. Even we got good results on our internal benchmarks.</li>
      
        
        <li><b>Jim Norton</b>: on apt-get update
I get this error:

W: GPG error: http:&#47;&#47;dl.hhvm.com precise Release: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY ....</li>
      
        
        <li><b>Paul Tarjan</b>: Yeah, I just signed the packages. You're going to need to do this:

wget -O - http:&#47;&#47;dl.hhvm.com&#47;conf&#47;hhvm.gpg.key | sudo apt-key add -</li>
      
        
        <li><b>Our Future Technology Partners | Skooppa.com</b>: [&#8230;] own Hiphop PHP compiler, which compiles PHP into C++ code to make incredible performance advances compared to the regular PHP interpreter and moderate performance advances over opcode caching. This system is being actively developed and [&#8230;]</li>
      
        
        <li><b>Julien</b>: This worked for me, but now it can't find hhvm-fastcgi.
It worked last week ! I guess you pushed this version in a hurry :P</li>
      
        
        <li><b>Paul Tarjan</b>: Which distro?</li>
      
        
        <li><b>Scott</b>: I'm a bit confused. Your first wordpress test shows 22 requests per second from php fpm, but my own nginx&#47;php-fpm 2GB vps does over 1300 requests per second with apache bench against example.com&#47;?p=1

In the comments, you say php-fpm is ran with opcache, but the over 2 second response time disagree.

My site does under 600ms pageloads with wordpress php-fpm.

Something is wrong with your test.

You either aren't using opcache, or your hardware is really, really bad.</li>
      
        
        <li><b>Scott</b>: Server Software:        nginx
Server Hostname:        localhost
Server Port:            80

Document Path:          &#47;?p=1
Document Length:        0 bytes

Concurrency Level:      50
Time taken for tests:   15.860 seconds
Complete requests:      1000
Failed requests:        0
Non-2xx responses:      1000
Total transferred:      359000 bytes
HTML transferred:       0 bytes
Requests per second:    63.05 [#&#47;sec] (mean)
Time per request:       793.023 [ms] (mean)
Time per request:       15.860 [ms] (mean, across all concurrent requests)
Transfer rate:          22.10 [Kbytes&#47;sec] received

Connection Times (ms)
              min  mean[+&#47;-sd] median   max
Connect:        0    0   1.5      0       9
Processing:   398  775 268.0    740    2047
Waiting:      398  775 268.0    740    2046
Total:        398  776 269.3    740    2055

Percentage of the requests served within a certain time (ms)
  50%    740
  66%    796
  75%    846
  80%    884
  90%    972
  95%   1280
  98%   1871
  99%   1958
 100%   2055 (longest request)


This is php-fpm with opcache with fastCGI cache off.

What's odd about it, besides being drastically faster than your results, is if I increase the concurrency to 500 from 50, the requests per second goes up to 434 requests per second</li>
      
        
        <li><b>Grim</b>: How? I same with u,but is not ok. e.g.symfony&#47;web&#47;app_dev.php&#47;demo&#47; is 404 not found.</li>
      
        
        <li><b>Julius Kopczewski</b>: You have only 359 bytes per request and only 22.10 of transfer? Did you install the sample data at all? Note that in my test there seem to be much, much higher transfer, and that's despite fewer requests served. I would  expect you are hitting a different page or your page contains different data.

Either way, I will ask somebody to re-run the test when they are free.</li>
      
        
        <li><b>Julius Kopczewski</b>: Perhaps you're getting 302 or something like that? Let me know if I read the stats correctly.</li>
      
        
        <li><b>Julius Kopczewski</b>: In particular, take note of that "Non-2xx responses: 1000". All results should be 200, and they were in my case.</li>
      
        
        <li><b>Julius Kopczewski</b>: See my replies below.</li>
      
        
        <li><b>Ajinkya</b>: What is this hip hop virtual machine, does it do hip hop when you run any program on it?</li>
      
        
        <li><b>Julius Kopczewski</b>: No, only if you hit it hard.</li>
      
        
        <li><b>Scott</b>: You make a good point.
I actually had a full wordpress sitting there, but apparently when apache bench is run on &#47;p=1, it's actually having 404 errors, despite the fact that going to example.com&#47;p=1 loads a real page.

Testing with example.com&#47; works fine, example.com&#47;p=1 fails.

I also realized I had fastCGI cache set to 1s (which sits on tmpfs), which made a crazy performance difference.

Server Software:        nginx
Server Hostname:        unicornuproar.com
Server Port:            80

Document Path:          &#47;
Document Length:        126772 bytes

Concurrency Level:      100
Time taken for tests:   7.630 seconds
Complete requests:      1000
Failed requests:        0
Total transferred:      127048000 bytes
HTML transferred:       126772000 bytes
Requests per second:    131.05 [#&#47;sec] (mean)
Time per request:       763.048 [ms] (mean)
Time per request:       7.630 [ms] (mean, across all concurrent requests)
Transfer rate:          16259.83 [Kbytes&#47;sec] received

Connection Times (ms)
              min  mean[+&#47;-sd] median   max
Connect:        0    0   0.4      0       2
Processing:    31  726 149.8    757     936
Waiting:       18  700 147.4    735     885
Total:         33  726 149.4    757     936

Percentage of the requests served within a certain time (ms)
  50%    757
  66%    776
  75%    794
  80%    805
  90%    839
  95%    866
  98%    892
  99%    907
 100%    936 (longest request)

This is ab -c 100 -n 1000 http:&#47;&#47;unicornuproar.com&#47;</li>
      
        
        <li><b>Scott</b>: I have a question.

If you use nginx with fastCGI support, with hhvm, can you use nginx fastCGI caching?

It should work, logically, but I'm just checking.</li>
      
        
        <li><b>Julius Kopczewski</b>: So curious, are the updated results with or without the caching?</li>
      
        
        <li><b>Julius Kopczewski</b>: Not sure how it works. I would have to understand what does the caching do on the protocol level. FastCGI is a stateful protocol, however the entire state is contained within a transaction. If therefore cache is used to skip an entire transaction I don't see any issues. Otherwise I would have to understand the internals to know what is needed to support it.</li>
      
        
        <li><b>Kasper Isager</b>: I'm happy to announce that Vagrant LNPP now includes optional support for HHVM FastCGI: https:&#47;&#47;github.com&#47;kasperisager&#47;vagrant-lnpp

Thanks heaps for this article, it was a great help in getting things set up!</li>
      
        
        <li><b>mig5</b>: Doesn't seem to play nicely with Percona Server (drop-in replacement for MySQL) ?

# &#47;etc&#47;init.d&#47;hhvm-fastcgi start
&#47;usr&#47;bin&#47;hhvm: &#47;usr&#47;lib&#47;libmysqlclient.so.18: no version information available (required by &#47;usr&#47;bin&#47;hhvm)</li>
      
        
        <li><b>slurm</b>: test using wordpress:
ab -c 100 -n 1000 http:&#47;&#47;localhost&#47;wordpress&#47;

Without hhvm: (apache 2.4.6 + modphp 5.5.3) 
Requests per second:    108.79 [#&#47;sec] (mean)

with apache 2.4.6 + hhvm 2.3.1:   
Requests per second:    324.37 [#&#47;sec] (mean)

cpu: i5 760. 
------------------------------------------------------
Server Software:        Apache&#47;2.4.6
Server Hostname:        localhost
Server Port:            80

Document Path:          &#47;wordpress&#47;
Document Length:        7673 bytes

Concurrency Level:      100
Time taken for tests:   3.083 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      7914000 bytes
HTML transferred:       7673000 bytes
Requests per second:    324.37 [#&#47;sec] (mean)
Time per request:       308.293 [ms] (mean)
Time per request:       3.083 [ms] (mean, across all concurrent requests)
Transfer rate:          2506.87 [Kbytes&#47;sec] received</li>
      
        
        <li><b>Paul Tarjan</b>: Awesome, thank you. Let us know if there are any issues.</li>
      
        
        <li><b>Paulo Figueiredo</b>: I'v set up nginx with hhvm but, any file .php returns me "<b>Not found</b>" except index.php that returns me "<b>Running on HHVM version 2.3.2.</b>"

Some of my configurations

<b>&#47;etc&#47;nginx&#47;sites-enable&#47;default</b>

location ~ .php$ {
        root &#47;usr&#47;share&#47;nginx&#47;www;
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME &#47;usr&#47;share&#47;nginx&#47;www$fastcgi_script_name;
        include        fastcgi_params;
}

<b>&#47;etc&#47;hhvm&#47;server.hdf</b>

Server {
  Port = 80
  SourceRoot = &#47;usr&#47;share&#47;nginx&#47;www&#47;
  DefaultDocument = index.php
}</li>
      
        
        <li><b>Paul Tarjan</b>: That looks right. All your other files are in "&#47;usr&#47;share&#47;nginx&#47;www&#47;" and the www-data user has access to read them?</li>
      
        
        <li><b>Paulo Figueiredo</b>: Setup a test environment for HipHop VM.

The final VM will contain HHVM, Nginx, PHP, MySQL, ab.

https:&#47;&#47;github.com&#47;javer&#47;hhvm-vagrant-vm</li>
      
        
        <li><b>Paulo Figueiredo</b>: Yes! I guess! :)

-rwxrwxrwx 1 www-data www-data   383 Jul  7  2006 50x.html
-rwxrwxrwx 1 www-data www-data  2759 Jan  5 14:17 default.txt
-rwxrwxrwx 1 www-data www-data 51599 Set 27 11:47 image.php
-rwxrwxrwx 1 www-data www-data   157 Jan  5 14:27 index.html
-rwxrwxrwx 1 www-data www-data    22 Jan  5 14:48 index.php
-rw-r--r-- 1 www-data www-data     5 Jan  5 16:01 www.pid
root@rack:&#47;usr&#47;share&#47;nginx&#47;www# pwd
&#47;usr&#47;share&#47;nginx&#47;www</li>
      
        
        <li><b>Paulo Figueiredo</b>: Yes! I guess! :)
-rwxrwxrwx 1 www-data www-data 383 Jul 7 2006 50x.html
-rwxrwxrwx 1 www-data www-data 2759 Jan 5 14:17 default.txt
-rwxrwxrwx 1 www-data www-data 51599 Set 27 11:47 image.php
-rwxrwxrwx 1 www-data www-data 157 Jan 5 14:27 index.html
-rwxrwxrwx 1 www-data www-data 22 Jan 5 14:48 index.php
-rw-r&ndash;r&ndash; 1 www-data www-data 5 Jan 5 16:01 http:&#47;&#47;www.pid
root@rack:&#47;usr&#47;share&#47;nginx&#47;www# pwd
&#47;usr&#47;share&#47;nginx&#47;www</li>
      
        
        <li><b>Jim Walker</b>: I'm guessing this is not something that could ever be installed on a cPanel server?</li>
      
        
        <li><b>Scott</b>: Thank you for your response.

I don't have the information to give you on that as I'm not a developer, just a guy who likes webservers.</li>
      
        
        <li><b>Scott</b>: Without caching.

The setup is:
Wordpress 3.8.1
Arch Linux (current, rolling distro)
nginx-custom-dev from aur
2GB of ram (32GB ram box, rented from weloveservers.net)
raid 10 hard drives of some variety (unknown)
No fastCGI cache</li>
      
        
        <li><b>Scott</b>: I should mention, 8 virtual cores on a xeon e3 1270v3 (quadcore with hyperthreading)</li>
      
        
        <li><b>Scott</b>: Not for a long, long time, Jim.</li>
      
        
        <li><b>Scott</b>: How did I miss the most important parts...

php 5.5 with opcache (the built in variation)</li>
      
        
        <li><b>Julius Kopczewski</b>: I see, I will ask someone to rerun the test. I can't do it right now myself because I'm terribly busy at least until 15th. Thank you very much for doing the tests!</li>
      
        
        <li><b>alexodus</b>: +1</li>
      
        
        <li><b>Drupal Tuning | Annotary</b>: [&#8230;] www.hhvm.com [&#8230;]</li>
      
        
        <li><b>diego</b>: Has anyone had luck with Ubuntu 12.04 and Apache2.2 now? Or is there a possibility to install Apache2.4 with mod_proxy_fcgi on Ubuntu 12.04? 14.04 LTS is not that far away, but I don't want to wait 3 month :)</li>
      
        
        <li><b>mods missing in apache2 : a web developer&#039;s ...blah blah blah... blog :)</b>: [&#8230;] guys over at Facebook. To say that it is impressive, is an understatement &#8211; take a look this post. They got a WordPress installation running at 23 concurrent requests per second, all the way up to [&#8230;]</li>
      
        
        <li><b>PHP HHVM with specific virtual hosts in apache : a web developer&#039;s ...blah blah blah... blog :)</b>: [&#8230;] article follows on from a previous post which is here, which in turned followed on from this post here. I decided to write this post as I have a number of sites inside my development box and I wanted to [&#8230;]</li>
      
        
        <li><b>Migrate Wordpress to Amazon EC2 | 6tech.org | Open Source Writeups</b>: [&#8230;] Checkout the primer here: &nbsp;HHVM [&#8230;]</li>
      
        
        <li><b>Bob</b>: Hi all,

For some unknown reason HHVM-fastcgi won't fire the mysqli() function.

I've found that HHVM is not supporting mysqli but I thought hhvm-fastcgi was...

Can somebody help? More info: http:&#47;&#47;stackoverflow.com&#47;questions&#47;21392048&#47;hiphop-fatal-error-class-undefined-mysqli&#47;21392106</li>
      
        
        <li><b>HHVM revisited - SitePoint</b>: [&#8230;] on December 17th, 2013 the HHVM team announced FastCGI support. FastCGI is a protocol for a server&#039;s communication with the application [&#8230;]</li>
      
        
        <li><b>Thomas Decaux</b>: Tried to run my framework eBuildy on it, everything is working fine, except its very slow (10x more than with PHP5.5+OpCache).

I ran a ab test, I saw my CPU grows to 100% ;(

Is there setting to tune this?

Thanks,</li>
      
        
        <li><b>Paul Tarjan</b>: Run it a few times. We take a while to warm up. Also, if you are running the command line, you will want `-vEval.Jit=true` to turn on the JIT.</li>
      
        
        <li><b>Nginx + HHVM FastCGI 配置指南 | Qing&#039;s Blog</b>: [&#8230;] FasterCGI with HHVM 由于 hhvm.com 网站被Qiang，可以通过hhvm.cn的镜像查看。 [&#8230;]</li>
      
        
        <li><b>HHVM, Nginx and Laravel | victor - note</b>: [&#8230;] Information on installing HHVM on other server distributions (including newer Ubuntu&#8217;s) can be&nbsp;found here. [&#8230;]</li>
      
        
        <li><b>A Look at Hack, the PHP Replacement in HHVM - SitePoint</b>: [&#8230;] few things that are worth mentioning are the recent support for FastCGI and the integrated [&#8230;]</li>
      
        
        <li><b>cabana</b>: HI
I have a qustion. Would someone tell me why I can't upload file over ftp funcion in PHP when I'm using HHVM?
Maybe Someone had a similar problem and would tell me how to fix it ;)</li>
      
        
        <li><b>Nick</b>: I think maybe it should be mentioned that you'll need to add 'IP = 127.0.0.1' to server.hdf.
Otherwise (and this is my experience on Debian using the repos you have above) hhvm will bind to 0.0.0.0 and not localhost.</li>
      
        
        <li><b>Franky</b>: Have you ever run performance tests how good it performs when the cached WordPress Template comes out of a Ramdisk?</li>
      
        
        <li><b>Robert</b>: I'm using Ubuntu 13.10 with Apache2:
I installed HHVM and it is running on port 9000...
I cannot find these config files:
mod_proxy.load
mod_proxy.conf
mod_proxy_fcgi.load
Where can I download them from???</li>
      
        
        <li><b>PHP + FastCGI + HHVM | REMO Ideas</b>: [&#8230;] La p&aacute;gina de como instalar hhvm oficial es esta http:&#47;&#47;www.hhvm.com&#47;blog&#47;1817&#47;fastercgi-with-hhvm [&#8230;]</li>
      
        
        <li><b>Ruben de Vries</b>: fast-cgi can spawn a big pile of workers, hhvm is just one process

how does this compare?
is this configurable somehow?</li>
      
        
        <li><b>Hack Isn&rsquo;t PHP | Roger Stringer</b>: [&#8230;] and they stand to gain a lot if they can make it faster, so they wrote their own runtime that&rsquo;s&nbsp;much&nbsp;faster than the official one. This is exactly what the PHP world needed: making its already-fast [&#8230;]</li>
      
        
        <li><b>Geo</b>: Trying to send SMTP mail i get error:

Undefined function: stream_socket_enable_crypto</li>
      
        
        <li><b>necenzurat</b>: same error here, but i manage to install wordpress, on it so no probem except the notice</li>
      
        
        <li><b>My Journey with HHVM-Pt.1 - Tech Samurais</b>: [&#8230;] need to run the same tests as the ones on the HHVM blog and compare the results. These test will be run against our project. Let&#8217;s see what we get! [&#8230;]</li>
      
        
        <li><b>Crazyzurfer</b>: Doesn't work for ubuntu 14.04 :(</li>
      
        
        <li><b>Mark Jaquith</b>: Yep, it's working just fine for me. Nginx doesn't really care if it's PHP-FPM or HHVM it's sending the requests to. Its caching is unaffected.</li>
      
        
        <li><b>Install HHVM | Janik von Rotz</b>: [&#8230;] Prebuilt Packages on Ubuntu 12.04 FasterCgi with hhvm FastCGI configuration on the HHVM GitHub [&#8230;]</li>
      
        
        <li><b>Dave Harris</b>: A PHP-FPM worker process runs under the group &amp; user IDs of the owner of the site being served, set by the ownership of the document root for that site. As I run a server supporting multiple clients, this is invaluable. Can HHVM do this without me having to set up one VM per site?

Also: I manage the sites using ISPConfig. As the latter supports configuring sites to use FastCGI, I presume that if HHVM is the "other side" of FastCGI, it should work... but if not, it shouldn't be too hard to make it work :) Any opinions?</li>
      
        
        <li><b>Paul Tarjan</b>: HHVM uses threads to serve each request, where PHP5 uses processes. Sadly with threads we can't change UserID for each request.</li>
      
        
        <li><b>Setup HHVM on Ubuntu 13.10</b>: [&#8230;] can follow most of the directions here at the HHVM blog however there are a few other things to [&#8230;]</li>
      
        
        <li><b>YUE</b>: I run the SPECWeb2009 benchmark on the SUT. And at the SUT, I use the Nginx + HHVM3.2.0 as server. However, the requests per second is not good, and the hhvm process always crashes.looking forward to your reply！</li>
      
        
        <li><b>HHVM at it&#8217;s glance &#8211; speed comparision &#8211; Fohlen&#039;s Blog</b>: [&#8230;] a interesting article I found comparing HHVM with [&#8230;]</li>
      
        
        <li><b>ck</b>: Despite the age, you guys should go back and correct this page&#47;benchmark for the obvious error with wordpress.

"Requests per second: 949.21"
"Time per request:    1.054 [ms]"

This never happened in reality. Something clearly went wrong and those are empty replies with error messages if you examine the html of results.

Multiple independent benchmarks confirm this, even after "JIT warmup" HHVM is perhaps four times faster than php 5.5, certain never "40x" faster for wordpress.</li>
      
        
        <li><b>Why Facebook is making a PHP renaissance &#124; KidsIL</b>: [&#8230;] performance of HHVM has been reviewed&nbsp;in a few articles, and it seems to have pushed the core developers of PHP, as the last versions [&#8230;]</li>
      
        
        <li><b>Vozidea</b>: I tried to install it on Ubuntu 14.04 and followed instructions as i describe in https:&#47;&#47;github.com&#47;facebook&#47;hhvm&#47;issues&#47;3472 but i&acute;m having the 404 problem.

Perhaps someone can help, because i can't find the solution.</li>
      
        
        <li><b>laurens</b>: There is also a possiblity for one process per client. I guess. So there is room for changes. One per thread is the better way of doing things in my opinion.</li>
      
        
        <li><b>xeridea</b>: "Only 23 requests per second seem to indicate that WordPress is computationally very expensive to run in an interpreter."
This is more a sign that WordPress is horribly inefficient beyond reason or repair.  Anyone even remotely concerned about performance should not use it.  Years and years of horrible hacks on top of a bad framework to begin with, the devs refusing to fix it.

Fibonacci?  What kind of a test is this?  I am sure everyone has highly specific loops like this on their website.  Perhaps some better tests?

The legitimate tests performed by others that don't result in a thousand error pages (from you know, crashes, and incomplete features), show more reasonable performance boost (like 2-4x, but HHVM performance is extremely variable).

I am looking forward to PHPNG, which has comparable performance, with potentially more, doesn't crash, passes all the unit tests, is compatible with all extensions, is easy to install, has ALL the features, you don't wait years for features, and the best support.</li>
      
        
        <li><b>DRJ</b>: Any updates on this test? Please let's know how far HHVM has gone and how the results stack. Thanks.</li>
      
        
        <li><b>Fred Emmott</b>: I'll hopefully have a larger update to share soon, though you can see how we're trying to investigate performance here: https:&#47;&#47;github.com&#47;hhvm&#47;oss-performance</li>
      
        
        <li><b>HHVM with Nginx fastcgi not working properly | Zesati Answers</b>: [&#8230;] I&#039;ve followed a stairs mentioned here:http:&#47;&#47;www.hhvm.com&#47;blog&#47;1817&#47;fastercgi-with-hhvm [&#8230;]</li>
      
        
        <li><b>GT</b>: I doubt php-fpm installation had accelerator module. At the post date maybe the built-in opcache module wasn't available, but for fair comparison an apc could be essential. I don't know anyone who using php-fpm without one of these kind of modules (opcache&#47;apc&#47;zendaccelerator&#47;etc.)</li>
      
        
        <li><b>HHVM e Hack Language: Compartilhando experiencias | Grupo de Desenvolvedores de PHP de S&atilde;o Paulo</b>: [&#8230;] O mesmo vale para o&nbsp;HHVM, que oferece pacotes de instala&ccedil;&atilde;o para as principais Distros Linux e&nbsp;suporte para FastCGI, podendo ser executado&nbsp;nos principais&nbsp;servidores [&#8230;]</li>
      
        
        <li><b>HHVM bekommt FastCGI-Support und wird kompatibel mit Apache, Nginx, Lighttpd, ... - entwickler.de</b>: [&#8230;] der Beschreibung der FastCGI-Implementierung wird deutlich, dass Facebook stark auf CPU- und RAM-Optimierung hingearbeitet hat und die Erfahrung [&#8230;]</li>
      
        
        <li><b>How to Setup HHVM on Ubuntu 14.04 Server with Apache 2.4 &#8211; Part 1 | Runtime Reflection</b>: [&#8230;] http:&#47;&#47;hhvm.com&#47;blog&#47;1817&#47;fastercgi-with-hhvm [&#8230;]</li>
      
        
        <li><b>Faxicon Dev</b>: I'm still fail to build this one on plesk 12 with centos 7 , return to normal php</li>
      
        
        <li><b>Homsa Lomsa</b>: I'm benchmarking a PHP with one database insertion per request, but it seems like nginx&#47;php-fpm is a bit faster than nginx&#47;hhvm

~700 requests &#47; sec for nginx&#47;php-fpm against
~500 requests &#47; sec for nginx&#47;hhvm.

Any idea?</li>
      
        
        <li><b>Fred Emmott</b>: There is not enough information here to really give an informed response - that said, we are often slower at small benchmarks, and we do not consider this a problem as long as it is not true for real world applications; in our experience, benchmark performance and real world performance are rarely related.</li>
      
      
        </ul>
        <br/>
      
    
  
  
    <div class="fb-like pluginWrapper likeButtonWrapper" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
<script>
  window.fbAsyncInit = function() {
  FB.init({
    appId      : '1615782811974223',
    xfbml      : true,
    version    : 'v2.3'
  });
  };

  (function(d, s, id){
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement(s); js.id = id;
   js.src = "//connect.facebook.net/en_US/sdk.js";
   fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
    <div class="pluginWrapper twitterSharePlugin">
  <a href="https://twitter.com/share" class="twitter-share-button" data-hashtags="HHVM">Tweet</a>
</div>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  
  </article>
</div>

</div>
  </div>
</div>


      </div>
      <div class="footerContainer">
  <div id="footer_wrap" class="wrapper footerWrapper">
    <div class="footerBlocks">
      <div id="fb_oss" class="footerSection fbOpenSourceFooter">
          <svg class="facebookOSSLogoSvg" viewBox="0 0 1133.9 1133.9" x="0px" y="0px">
            <g>
              <path class="logoRing outerRing" d="M 498.3 3.7 c 153.6 88.9 307.3 177.7 461.1 266.2 c 7.6 4.4 10.3 9.1 10.3 17.8 c -0.3 179.1 -0.2 358.3 0 537.4 c 0 8.1 -2.4 12.8 -9.7 17.1 c -154.5 88.9 -308.8 178.1 -462.9 267.5 c -9 5.2 -15.5 5.3 -24.6 0.1 c -153.9 -89.2 -307.9 -178 -462.1 -266.8 C 3 838.8 0 833.9 0 825.1 c 0.3 -179.1 0.2 -358.3 0 -537.4 c 0 -8.6 2.6 -13.6 10.2 -18 C 164.4 180.9 318.4 92 472.4 3 C 477 -1.5 494.3 -0.7 498.3 3.7 Z M 48.8 555.3 c 0 79.9 0.2 159.9 -0.2 239.8 c -0.1 10 3 15.6 11.7 20.6 c 137.2 78.8 274.2 157.8 411 237.3 c 9.9 5.7 17 5.7 26.8 0.1 c 137.5 -79.8 275.2 -159.2 412.9 -238.5 c 7.4 -4.3 10.5 -8.9 10.5 -17.8 c -0.3 -160.2 -0.3 -320.5 0 -480.7 c 0 -8.8 -2.8 -13.6 -10.3 -18 C 772.1 218 633.1 137.8 494.2 57.4 c -6.5 -3.8 -11.5 -4.5 -18.5 -0.5 C 336.8 137.4 197.9 217.7 58.8 297.7 c -7.7 4.4 -10.2 9.2 -10.2 17.9 C 48.9 395.5 48.8 475.4 48.8 555.3 Z" />
              <path class="logoRing middleRing" d="M 184.4 555.9 c 0 -33.3 -1 -66.7 0.3 -100 c 1.9 -48 24.1 -86 64.7 -110.9 c 54.8 -33.6 110.7 -65.5 167 -96.6 c 45.7 -25.2 92.9 -24.7 138.6 1 c 54.4 30.6 108.7 61.5 162.2 93.7 c 44 26.5 67.3 66.8 68 118.4 c 0.9 63.2 0.9 126.5 0 189.7 c -0.7 50.6 -23.4 90.7 -66.6 116.9 c -55 33.4 -110.8 65.4 -167.1 96.5 c -43.4 24 -89 24.2 -132.3 0.5 c -57.5 -31.3 -114.2 -64 -170 -98.3 c -41 -25.1 -62.9 -63.7 -64.5 -112.2 C 183.5 621.9 184.3 588.9 184.4 555.9 Z M 232.9 556.3 c 0 29.5 0.5 59.1 -0.1 88.6 c -0.8 39.2 16.9 67.1 50.2 86.2 c 51.2 29.4 102.2 59.2 153.4 88.4 c 31.4 17.9 63.6 18.3 95 0.6 c 53.7 -30.3 107.1 -61.2 160.3 -92.5 c 29.7 -17.5 45 -44.5 45.3 -78.8 c 0.6 -61.7 0.5 -123.5 0 -185.2 c -0.3 -34.4 -15.3 -61.5 -44.9 -79 C 637.7 352.6 583 320.8 527.9 290 c -27.5 -15.4 -57.2 -16.1 -84.7 -0.7 c -56.9 31.6 -113.4 64 -169.1 97.6 c -26.4 15.9 -40.7 41.3 -41.1 72.9 C 232.6 491.9 232.9 524.1 232.9 556.3 Z" />
              <path class="logoRing innerRing" d="M 484.9 424.4 c 69.8 -2.8 133.2 57.8 132.6 132 C 617 630 558.5 688.7 484.9 689.1 c -75.1 0.4 -132.6 -63.6 -132.7 -132.7 C 352.1 485 413.4 421.5 484.9 424.4 Z M 401.3 556.7 c -3.4 37.2 30.5 83.6 83 84.1 c 46.6 0.4 84.8 -37.6 84.9 -84 c 0.1 -46.6 -37.2 -84.4 -84.2 -84.6 C 432.2 472.1 397.9 518.3 401.3 556.7 Z" />
            </g>
          </svg>
        <h2>Facebook Open Source</h2>
      </div>
      <div class="footerSection">
        <a class="footerLink" href="https://code.facebook.com/projects/" target="_blank">开源项目</a>
        <a class="footerLink" href="https://github.com/facebook/" target="_blank">GitHub</a>
        <a class="footerLink" href="https://twitter.com/fbOpenSource" target="_blank">Twitter</a>
      </div>
      <div class="footerSection rightAlign">
        <a class="footerLink" href="https://github.com/hhvm-cn/hhvm-cn.com" target="_blank">帮助我们翻译</a>
      </div>
    </div>
  </div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-49208336-2', 'auto');
  ga('send', 'pageview');
</script>

    </div>
  </body>
</html>
