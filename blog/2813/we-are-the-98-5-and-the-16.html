<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:url" content="http://hhvm-cn.com/blog/2813/we-are-the-98-5-and-the-16" />
  <meta property="og:site_name" content="HHVM"/>
  <meta property="og:title" content="We are the 98.5% (and the 16%)" />
  <meta property="og:image" content="http://hhvm-cn.com/static/og_image.png" />
  <meta property="og:description" content="On November 4th, the HHVM team went on a 3-week performance and parity lockdown. The lockdown officially ended on November 22nd. Overall, this lockdown was a..." />

  <link rel="stylesheet" href="/css/main.css" media="screen">
  <link rel="icon" href="/static/favicon.png" type="image/x-icon">
  

  <title>We are the 98.5% (and the 16%) | HHVM</title>
  <meta name="description" content="On November 4th, the HHVM team went on a 3-week performance and parity lockdown. The lockdown officially ended on November 22nd. Overall, this lockdown was a...">

  <link rel="canonical" href="http://hhvm-cn.com/blog/2813/we-are-the-98-5-and-the-16">
  <link rel="alternate" type="application/rss+xml" title="HHVM" href="http://hhvm-cn.com/feed.xml" />
</head>

  <body class="docsNavVisible">
    <div id="fixed_header" class="fixedHeaderContainer visible">
  <div class="headerWrapper wrapper">
    <header>
      <a href="http://hhvm-cn.com/">
        <img src="/static/logo.svg">
        <h2>HHVM</h2>
      </a>

      <div class="navigationWrapper navigationFull" id="flat_nav">
        <nav class="navigation">
          <ul>
            
              <li class="navItem">
                
                  <a href="https://docs.hhvm-cn.com/hhvm/getting-started/getting-started">安装</a>
                
              </li>
            
              <li class="navItem navItemActive">
                
                  <a href="/blog/">博客</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://docs.hhvm-cn.com/hhvm/">文档</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://github.com/facebook/hhvm">GitHub</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://hacklang-cn.org/">Hack</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="https://www.facebook.com/hhvm/">Facebook</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="https://twitter.com/HipHopVM">Twitter</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://webchat.freenode.net/?channels=hhvm">IRC</a>
                
              </li>
            
              <li class="navItem">
                
                  <a href="http://hhvm.h4cc.de/">模块支持</a>
                
              </li>
            
            
          </ul>
        </nav>
      </div>
      <div class="navigationWrapper navigationSlider" id="navigation_wrap">
        <div id="header_nav">
  <div class="navSlideout">
    <i class="menuExpand" id="header_nav_expander"><span></span><span></span><span></span></i>
  </div>
  <nav class="slidingNav">
    <ul>
      
      <li class="navItem">
        <a href="https://docs.hhvm-cn.com/hhvm/getting-started/getting-started" target="_blank">安装</a>
      </li>
      
      <li class="navItem">
        <a href="/blog/">博客</a>
      </li>
      
      <li class="navItem">
        <a href="http://docs.hhvm-cn.com/hhvm/" target="_blank">文档</a>
      </li>
      
      <li class="navItem">
        <a href="http://github.com/facebook/hhvm" target="_blank">GitHub</a>
      </li>
      
      <li class="navItem">
        <a href="http://hacklang-cn.org/" target="_blank">Hack</a>
      </li>
      
      <li class="navItem">
        <a href="https://www.facebook.com/hhvm/" target="_blank">Facebook</a>
      </li>
      
      <li class="navItem">
        <a href="https://twitter.com/HipHopVM" target="_blank">Twitter</a>
      </li>
      
      <li class="navItem">
        <a href="http://webchat.freenode.net/?channels=hhvm" target="_blank">IRC</a>
      </li>
      
      <li class="navItem">
        <a href="http://hhvm.h4cc.de/" target="_blank">模块支持</a>
      </li>
      
      
    </ul>
  </nav>
</div>
<script>
  var event = document.createEvent('Event');
  event.initEvent('slide', true, true);
  document.addEventListener('slide', function (e) {
    document.body.classList.toggle('sliderActive');
  }, false);
  var headerNav = document.getElementById('header_nav');
  var headerNavExpander = document.getElementById('header_nav_expander');
  headerNavExpander.addEventListener('click', function(e) {
    headerNav.classList.toggle('navSlideoutActive');
    document.dispatchEvent(event);
  }, false);
</script>
      </div>
    </header>
  </div>
</div>

    <div class="navPusher">
      <div class="docMainWrapper wrapper">
      <div class="docsNavContainer">
  <nav class="toc" id="doc_nav">
    <div class="toggleNav" id="collection_nav">
      <section class="navWrapper wrapper">
        <div class="navBreadcrumb wrapper">
          <div class="navToggle" id="collection_nav_toggler">
            <i></i>
          </div>
          <h2>
            <a href="/blog/">Blog</a>
            
          </h2>
        </div>
        <div class="navGroups">
          
            
            
            <div class="navGroup navGroupActive navGroupCurrent">
  <h3><i>+</i><span>All Posts</span></h3>
  <ul>
    
      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/05/04/hhvm-4.56.html">HHVM 4.56</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/30/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/29/hhvm-4.55.html">HHVM 4.55</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/21/hhvm-4.54.html">HHVM 4.54</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/13/hhvm-4.53.html">HHVM 4.53</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/04/07/hhvm-4.52.html">HHVM 4.52</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/31/hhvm-4.51.html">HHVM 4.51</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/24/hhvm-4.50.html">HHVM 4.50</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/18/hhvm-4.49.html">HHVM 4.49</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/09/hhvm-4.48.html">HHVM 4.48</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/03/03/hhvm-4.47.html">HHVM 4.47</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/24/hhvm-4.46.html">HHVM 4.46</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/20/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/19/hhvm-4.45.html">HHVM 4.45</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/10/hhvm-4.44.html">HHVM 4.44</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/02/03/hhvm-4.43.html">HHVM 4.43</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/27/hhvm-4.42.html">HHVM 4.42</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/21/hhvm-4.41.html">HHVM 4.41</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/13/hhvm-4.40.html">HHVM 4.40</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/07/hhvm-4.39.html">HHVM 4.39</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2020/01/02/hhvm-4.38.html">HHVM 4.38</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/12/17/cancelling-hhvm-4.37.html">Holiday schedule: cancelling HHVM 4.37</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/12/16/hhvm-4.36.html">HHVM 4.36</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/12/10/hhvm-4.35.html">HHVM 4.35</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/12/02/hhvm-4.34.html">HHVM 4.34</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/25/hhvm-4.33.html">HHVM 4.33</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/19/hhvm-4.32.html">HHVM 4.32 (LTS)</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/19/distribution-support.html">Support lifecycle for older distributions</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/11/hhvm-4.31.html">HHVM 4.31.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/11/06/hhvm-4.30.html">HHVM 4.30.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/29/hhvm-4.29.html">HHVM 4.29.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/28/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/23/hhvm-4.28.html">HHVM 4.28</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/14/hhvm-4.27.0.html">HHVM 4.27.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/09/hhvm-4.26.0.html">HHVM 4.26.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/10/01/deprecating-references.html">Deprecating &$references</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/30/hhvm-4.25.0.html">HHVM 4.25.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/25/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/23/hhvm-4.24.0.html">HHVM 4.24.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/17/hhvm-4.23.0.html">HHVM 4.23.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/09/hhvm-4.22.0.html">HHVM 4.22.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/03/the-hhvm-4.21.0.html">HHVM 4.21.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/09/03/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/27/hhvm-4.20.0.html">HHVM 4.20.0 and 4.20.1</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/19/hhvm-4.19.0.html">HHVM 4.19.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/14/security-update.html">Security Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/12/hhvm-4.18.0.html">HHVM 4.18.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/07/bugfixes.html">Bugfixes for 3.30, 4.8, and 4.12-17</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/08/05/hhvm-4.17.0.html">HHVM 4.17.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/29/hhvm-4.16.0.html">HHVM 4.16.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/22/hhvm-4.15.0.html">HHVM 4.15.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/15/hhvm-4.14.0.html">HHVM 4.14.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/09/hhvm-4.13.0.html">HHVM 4.13.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/07/01/hhvm-4.12.0.html">HHVM 4.12.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/24/hhvm-4.11.0.html">HHVM 4.11.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/18/hhvm-4.10.0.html">HHVM 4.10.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/13/hhvm-4.9.1.html">HHVM 4.9.1, repository changes</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/10/hhvm-4.9.0.html">HHVM 4.9.0, and security updates for 3.30, and 4.3-4.7</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/06/03/hhvm-4.8.0.html">HHVM 4.8.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/05/28/hhvm-4.7.0.html">HHVM 4.7.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/05/21/hhvm-4.6.0.html">HHVM 4.6.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/05/13/hhvm-4.5.0.html">HHVM 4.5.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/05/06/hhvm-4.4.0.html">HHVM 4.4.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/04/30/hhvm-4.3.0.html">HHVM 4.3.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/04/23/hhvm-4.2.0.html">HHVM 4.2.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/04/09/hhvm-4.1.0.html">HHVM 4.1.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/04/03/hhvm-4.0.4.html">HHVM 4.0.4, 3.30.5, and 3.27.8</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/28/hhvm-4.0.3.html">HHVM 4.0.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/19/hhvm-4.0.2.html">HHVM 4.0.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/14/hhvm-4.0.1.html">HHVM 4.0.1, 3.30.4, and 3.27.7: CVE-2019-3552</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/11/hhvm-4.0.0.html">HHVM 4.0.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/02/01/hhvm-3.30.3.html">HHVM 3.30.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2019/01/14/hhvm-3.30.2.html">HHVM 3.30.2 and 3.27.6</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/12/18/hhvm-3.30.1.html">HHVM 3.30.1 and 3.27.5</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/12/17/hhvm-3.30.html">HHVM 3.30</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/10/30/hhvm-3.29.1.html">HHVM 3.29.1 and 3.27.4</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/10/22/hhvm-3.29.html">HHVM 3.29</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/10/01/hhvm-3.28.3.html">HHVM 3.28.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/09/28/hhvm-3.28.2.html">HHVM 3.28.2 and 3.27.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/09/26/introducing-hacktest.html">Introducing HackTest</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/09/12/end-of-php-support-future-of-hack.html">Ending PHP Support, and The Future Of Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/08/30/hhvm-3.28.1.html">HHVM 3.28.1</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/08/28/hhvm-3.28.0.html">HHVM 3.28.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/08/15/hhvm-3.27.2.html">HHVM 3.27.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/07/19/hhvm-3.27.1.html">HHVM 3.27.1 and 3.24.8</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/06/18/hhvm-3.27.0.html">HHVM 3.27.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/24/hhvm-3.26.3.html">HHVM 3.26.3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/15/hhvm-3.26.2.html">HHVM 3.26.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/11/hhvm-3.26.1.html">HHVM 3.26.1</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/07/hhvm-3.26.html">HHVM 3.26 - Introducing HackC</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/05/04/hhvm-3.25.3.html">HHVM 3.25.3, HHVM 3.24.7, and 3.21.11</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/04/11/relicensing-hack.html">Relicensing Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/03/30/hhvm-3.25.2.html">HHVM 3.25.2, HHVM 3.24.6, and 3.21.10 (CVE-2018-6334)</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/03/22/hhvm-3.25.1.html">HHVM 3.25.1, HHVM 3.24.5, and 3.21.9</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/03/15/hhvm-3.25.html">HHVM 3.25.0, 3.24.4, and 3.21.8</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/03/02/hhvm-3.24.3.html">HHVM 3.24.3 and 3.21.7</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/02/07/hhvm-3.24.2.html">HHVM 3.24.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/01/30/hhvm-3.24.1.html">HHVM 3.24.1, 3.21.6, and 3.18.8</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/01/16/hhvm-3.24.html">HHVM 3.24</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/01/12/hhvm-3.23.4.html">HHVM 3.23.4, 3.21.5, and 3.18.7</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2018/01/02/hhvm-3.23.3.html">HHVM 3.23.3, 3.21.4, and 3.18.6</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/11/17/hhvm-3-23.html">HHVM 3.23</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/11/14/gpg-key-migration.html">GPG Key Migration</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/10/26/the-hack-standard-library-1-0.html">The Hack Standard Library: v1.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/09/26/hhvm-3-22.html">HHVM 3.22</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/09/18/the-future-of-hhvm.html">The Future of HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/08/02/hhvm-3-21.html">HHVM 3.21</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/06/07/hhvm-3-20.html">HHVM 3.20</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/04/13/hhvm-3-19.html">HHVM 3.19</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/03/23/concurrent-jit-compilation.html">Concurrent JIT Compilation</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/03/09/how-the-cyber-elephant-got-his-arm.html">How the Cyber-Elephant Got His ARM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/02/17/region-jit.html">HHVM's Profile-guided Region JIT</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/02/15/hhvm-3-18.html">HHVM 3.18</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2017/01/26/new-year-new-me.html">New Year, New Me</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/11711/hhvm-3-15">HHVM 3.15</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10925/improved-user-documentation">Improved User Documentation</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10859/php-7-support">PHP 7 Support</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10649/improving-arrays-in-hack">Improving Arrays in Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10205/llvm-code-generation-in-hhvm">LLVM Code Generation in HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10379/hhvm-3-10-0">HHVM 3.10.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/10043/experimental-mac-os-x-support">Experimental Mac OS X Support</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9995/hhvm-3-9-0">HHVM 3.9.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9803/hhvm-3-8-0">HHVM 3.8.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9773/cve-2015-4663">CVE-2015-4663</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9581/trait-and-interface-requirements-in-hack">Trait and interface requirements in Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9293/lockdown-results-and-hhvm-performance">Lockdown Results and HHVM Performance</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9215/covariance-contravariance-and-super-type-constraints">Covariance, Contravariance, and super Type Constraints</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9089/hhvm-lockdown">HHVM Lockdown</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/9059/hhvm-3-7-0">HHVM 3.7.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8981/announcing-our-book-hack-hhvm">Announcing our book: “Hack & HHVM”</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8939/etsys-transition-to-hhvm">Etsy's Transition to HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8849/hhvm-3-6-0">HHVM 3.6.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8537/announcing-a-specification-for-hack">Announcing a Specification for Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/8405/coming-soon-in-hhvm">Coming Soon in HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/7637/hhvm-3-5-0">HHVM 3.5.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/7205/wikipedia-on-hhvm">Wikipedia on HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/7349/lts-updates">LTS Updates</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/7091/async-cooperative-multitasking-for-hack">Async - Cooperative Multitasking for Hack</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6989/wp-engine-and-box-now-use-hhvm">WP Engine and Box now use HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6899/hhvm-3-4-0">HHVM 3.4.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6863/announcing-the-hack-transpiler">Announcing the Hack Transpiler</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6473/hack-overriding-constructors-new-static-and-__consistentconstruct">Hack: Overriding Constructors, "new static", and __ConsistentConstruct</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6767/hhvm-3-3-1">HHVM 3.3.1</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6515/using-xhp-with-bootstrap">Using XHP with Bootstrap</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6443/hack-recent-updates">Hack: Recent Updates</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6323/the-journey-of-a-thousand-bytecodes">The Journey of a Thousand Bytecodes</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6239/hhvm-3-3-0">HHVM 3.3.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6083/hhvm-long-term-support">HHVM Long Term Support</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/6005/hack-community-roundup-3">Hack Community Roundup #3</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5723/announcing-a-specification-for-php">Announcing a specification for PHP</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5609/hhvm-3-2-0">HHVM 3.2.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5399/faster-github-commits">Faster GitHub Commits</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5429/hack-community-roundup-2">Hack Community Roundup #2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/5195/hhvm-3-1-0">HHVM 3.1.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4811/hack-community-roundup">Hack Community Roundup</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4841/compatibility-update">Compatibility Update</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4685/hack-developer-day-2014-keep-hacking">Hack Developer Day 2014: Keep Hacking</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4601/debug-packages">Debug Packages</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4349/hhvm-3-0-0">HHVM 3.0.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4325/hacking-hack-on-heroku">Hacking Hack on Heroku</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4223/introducing-hack-a-programming-language-for-hhvm">Introducing Hack - A Programming Language for HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4103/hhvm-2-4-2">HHVM 2.4.2</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3611/tracking-parity">Tracking Parity</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3689/implementing-mysqli">Implementing MySQLi</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3743/hhvm-the-next-six-months">HHVM: The Next Six Months</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3287/hhvm-2-4-0">HHVM 2.4.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3203/nightly-packages">Nightly Packages</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2813/we-are-the-98-5-and-the-16">We are the 98.5% (and the 16%)</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/1817/fastercgi-with-hhvm">FasterCGI with HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2393/hhvm-2-3-0-and-travis-ci">HHVM 2.3.0 and Travis CI</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/2027/faster-and-cheaper-the-evolution-of-the-hhvm-jit">Faster and Cheaper: The Evolution of the hhvm JIT</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/1499/locking-down-for-performance-and-parity">Locking Down for Performance and Parity </a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/1379/hhvm-on-heroku">HHVM on Heroku</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/1301/hhvm-2-2-0">HHVM 2.2.0</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/875/wow-hhvm-is-fast-too-bad-it-doesnt-run-my-code">Wow HHVM is fast...too bad it doesn’t run my code</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/713/hhvm-optimization-tips">HHVM Optimization Tips</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/575/joining-retirement-testing-and-bankruptcy">Joining, Retirement, Testing, and Bankruptcy</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/521/the-adminserver">The AdminServer</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/431/on-garbage-collection">On Garbage Collection</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/401/spammers-are-still-a-thing-it-seems">Spammers are still a thing, it seems</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/311/adding-an-opcode-to-hhbc">Adding an opcode to HHBC</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/4061/go-faster">Go Faster!</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3095/getting-wordpress-running-on-hhvm">Getting WordPress running on HHVM</a></li>

      
      <li class="navListItem"><a class="navItem" href="http://hhvm-cn.com/blog/3089/wordpress-3-4-2-running-on-hiphop-hhvm">WordPress 3.4.2 running on HHVM</a></li>

      
    
  </ul>
</div>
          
        </div>
      </section>
    </div>
  </nav>
</div>
<script>
  var docsevent = document.createEvent('Event');
  docsevent.initEvent('docs_slide', true, true);
  document.addEventListener('docs_slide', function (e) {
    document.body.classList.toggle('docsSliderActive');
  }, false);

  var collectionNav = document.getElementById('collection_nav');
  var collectionNavToggler = 
    document.getElementById('collection_nav_toggler');
  collectionNavToggler.addEventListener('click', function(e) {
    collectionNav.classList.toggle('toggleNavActive');
    document.dispatchEvent(docsevent);
  });

  var groups = document.getElementsByClassName('navGroup');
  for(var i = 0; i < groups.length; i++) {
    var thisGroup = groups[i];
    thisGroup.onclick = function() {
      for(var j = 0; j < groups.length; j++) {
        var group = groups[j];
        group.classList.remove('navGroupActive');
      }
      this.classList.add('navGroupActive');
    }
  }
</script>


      <div class="mainContainer blogContainer postContainer">
  <div id="main_wrap" class="wrapper mainWrapper">
    <div class="lonePost">
<div class="post">
  
  <header class="post-header">
    
    <div class="authorPhoto">
      <img src="https://graph.facebook.com/611217057/picture/" alt="" title="" />
    </div>
    
    
    <p class="post-authorName">Joel Marcey</p>
    
    <h1 class="post-title">We are the 98.5% (and the 16%)</h1>
    <p class="post-meta">Posted December 19, 2013</p>
  </header>

  <article class="post-content">
  
    <p>On November 4th, the HHVM team went on a <a href="http://www.hhvm.com/blog/1499/locking-down-for-performance-and-parity">3-week performance and parity lockdown</a>. The lockdown officially ended on November 22nd. Overall, this lockdown was a qualified success. Success was measured on 3 vectors:</p>

<!--truncate-->

<ol>
  <li>
    <p>Did we meet our 99% average unit test pass percentage goal for the 21 open-source frameworks we tested against?</p>
  </li>
  <li>
    <p>Did we meet the 15% across the board performance improvement gains?</p>
  </li>
  <li>
    <p>Were the razors put away for the entirety of the three weeks?</p>
  </li>
</ol>

<p><img src="/static/images/posts/postlockdown21.png" alt="The HHVM Team at the post-lockdown party" /></p>
<center><i>The HHVM Team at the post-lockdown party</i></center>

<h2 id="parity">Parity</h2>

<p>Going into lockdown, the team knew that awesome performance alone would not suffice in making HHVM a viable PHP runtime to be used out in the wild. It actually had to run real, existing PHP code reliably. So we made that a first class work item (as it will continue to be into 2014). Our first step into improving PHP parity was to look at <a href="https://github.com/">Github</a>, see which <a href="https://github.com/search?l=php&amp;q=stars%3A%3E1&amp;s=stars&amp;type=Repositories">PHP projects were being used by many people</a> (via their “star” rating) and make sure their unit tests would run successfully on HHVM.</p>

<h3 id="parity-results">Parity Results</h3>

<p>Let’s just get to the numbers. After over <strong>125 diffs</strong>, here are the results of the parity portion of our 3-week lockdown.</p>

<p><a href="/blog/2013/09/12/wow-hhvm-is-fast-too-bad-it-doesnt-run-my-code.html">Recall the table of parity</a> before the lockdown. Now, here is our graph of improvement after the lockdown:</p>

<p><img src="/static/images/posts/Screenshot-2013-12-17-12.35.361.png" alt="The updated unit test parity results after our 3-week lockdown" /></p>
<center><i>The updated unit test parity results after our 3-week lockdown</i></center>

<p>As you probably can see by the graph, we were successful in our efforts to improve unit test parity nearly across the board:</p>

<ol>
  <li>
    <p>The team <strong>doubled</strong> the number of open source projects with unit tests that pass at 100% on HHVM (from 4 to 8). And we have 4 more that are very close in the 99%+ range.</p>
  </li>
  <li>
    <p>We had &gt; 10% gains in Assetic, Symfony, Yii and CodeIngiter (I am not counting the Pear gain here since we did not have a nice baseline number to begin with).</p>
  </li>
  <li>
    <p>And all 21 frameworks are above 90% in overall unit test pass percentage.</p>
  </li>
</ol>

<p>Many of the diffs and updates that enabled our unit test parity increase are part of the <a href="http://www.hhvm.com/blog/2393/hhvm-2-3-0-and-travis-ci">HHVM 2.3 package</a>. Some key improvements that had significant impact on our unit test results were:</p>

<ol>
  <li>
    <p>Make array not an instanceof <code class="highlighter-rouge">Traversable</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">Internationalization</code> support</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">PDO::sqliteCreateFunction()</code> implementation</p>
  </li>
  <li>
    <p>The beginning of real <code class="highlighter-rouge">php.ini</code> support</p>
  </li>
</ol>

<p>However, there are a few curiosities…</p>

<ol>
  <li>
    <p><strong>Why did PhpMyAdmin regress?</strong> We are not convinced this is a regression in the “we are failing more tests than before because of some code we broke” sense. This actually may have to do with our testing framework script not actually loading all of the tests properly initially. We fixed this mid-stream. That said, we are looking into the root cause of this regression, just in case we broke something.</p>
  </li>
  <li>
    <p><strong>Why the 90 degree cliff drop-off around November 24th?</strong> We submitted a diff that we thought was going to push a framework to 100%, but instead <a href="https://github.com/facebook/hhvm/commit/c6d99f1e8eb869a2c16449d057af66eca266fc7b">segfaulted the runtime</a>. It was <a href="https://github.com/facebook/hhvm/commit/2d4f9ee46bfc20b34e77ccd93816c2d6cfd8a26c">fixed soon thereafter</a>.</p>
  </li>
</ol>

<h3 id="testing-framework">Testing Framework</h3>

<p>The 21 open source projects that were used as our initial baseline to increase our unit test parity were, as stated above, chosen on popularity. However, they were also chosen based on their use of PHPUnit and on how well they would work with our testing framework. Given the sheer number of unit tests that come with some of these projects (e.g., Symfony and ZF2 each have over 10K tests), we needed to come up with a testing framework that would allow us to run the tests for all of the projects in a speedy manner. So the team developed a script that would download, install and run the unit tests for all of the 21 open source projects in parallel. The script is still a work in progress, but it allowed us to run all 50K+ unit tests in 30 minutes to 1 hour (depending if the JIT is on) vs the many hours it would take to the unit tests serially. That script is located in the <a href="https://github.com/facebook/hhvm/blob/master/hphp/test/frameworks/run.php">HHVM Github repository</a>.</p>

<p>You may also notice that <strong><em>your</em></strong> favorite open source project is not currently in the list above. There are a couple of reasons for that. First, we couldn’t cover all open source projects in a 3-week span. Secondly, while open source projects like CakePHP are very important, and we will add them to our testing framework, there were some setup and configuration problems (e.g., requiring of a database) that wouldn’t allow us to add them in a short manner.</p>

<p>Finally, as discussed in our pre-lockdown blog post, the HHVM team created a bunch of “<a href="http://hhvm.com/wp-content/uploads/2013/11/2013-10-31-17.33.041.jpg">stickies</a>” to help guide our work. The stickies were placed on a “number of failing tests associated with this sticky task” vs. “number of days to implement”. So, we generally worked from top left to bottom right to get the most bang for our buck.</p>

<h3 id="assumptions-and-caveats">Assumptions and Caveats</h3>

<p>It is worth pointing out some of the assumptions and caveats that went into to coming up with the statistics above.</p>

<ul>
  <li>
    <p>The final, overall unit test pass percentage (98.5%) is a straight, unweighted average of the individual open source project unit test pass percentages (i.e., add all of the percentages and divide by 21). So, a project like Paris which has 50 unit tests carries the same percentage weight as Symfony which has 10K unit tests. If we weighted these percentages (where Symfony and Zf2 carried more weight than Paris and Idiorm), the overall pass percentage would see a minimal drop (minimal because of the small variance in pass percentages for all of the open source projects).</p>
  </li>
  <li>
    <p>There are some unit tests that fail in HHVM, but also fail with PHP 5.5.x. We called these tests “clowny” and disregarded them in our testing framework.</p>
  </li>
</ul>

<p><img src="/static/images/posts/2013-11-21-12.17.301.jpg" alt="Sometimes there is clowniness when it comes to PHP" /></p>
<center><i>Sometimes there is clowniness when it comes to PHP</i></center>

<ul>
  <li>There are some unit tests that actually caused problems with our testing framework script (deadlocks, etc.). We “blacklisted” these tests and counted them as failures in terms of our pass percentage.</li>
</ul>

<h3 id="submitted-project-pull-requests">Submitted Project Pull Requests</h3>

<p>There were times when code changes were necessary to the actual open source project in order to successfully run all of its unit tests. For example, a change may have been necessary in order to support our parallel testing framework. In other cases, there were actual bugs in the unit tests. A real pleasant surprise during our lockdown was how awesome the project owners/maintainers were in reviewing and, in most cases, accepting our pull requests.</p>

<h3 id="travis-integration">Travis Integration</h3>

<p>The <a href="http://www.hhvm.com/blog/2393/hhvm-2-3-0-and-travis-ci">announcement of HHVM 2.3</a> talked a bit about Travis CI Integration. Now that we are starting to consistently pass unit tests for open source projects, some have added HHVM to their Travis CI build (awesome!). Here are some open source frameworks that have added us to their CI build:</p>

<ul>
  <li>
    <p><a href="https://github.com/sebastianbergmann/phpunit/pull/1072">PHPUnit</a></p>
  </li>
  <li>
    <p><a href="https://github.com/yiisoft/yii/pull/3109">Yii</a></p>
  </li>
  <li>
    <p><a href="https://github.com/doctrine/doctrine2/pull/873">Doctrine 2</a></p>
  </li>
  <li>
    <p><a href="https://github.com/laravel/framework/pull/2973">Laravel</a></p>
  </li>
</ul>

<p>Thanks to the above for adding us so quickly. And we have <a href="https://github.com/search?q=Try+running+unit+tests+on+HHVM+&amp;ref=cmdform&amp;type=Issues">many pull requests outstanding</a> for other open source frameworks to do the same.</p>

<h2 id="performance">Performance</h2>

<p>The performance team blew through their lockdown performance goal of 15% and ended up at 16% for running facebook.com.</p>

<p><img src="http://hhvm.com/wp-content/uploads/2013/12/Screenshot-2013-12-18-09.54.181.png" alt="The updated performance results after our 3-week lockdown" /></p>
<center><i>The updated performance results after our 3-week lockdown</i></center>

<p>This can only mean good things for other PHP code out in the wild. The performance gains came from lots of small improvements, and a few big ones. Some of the biggest wins were:</p>

<ol>
  <li>
    <p>Generating code for unusual function call patterns. HHVM already generates good code for ordinary function and method calls, so some less-common patterns had started to show up in our performance profile data. The two biggest ones were <a href="http://php.net/manual/en/function.call-user-func.php"><code class="highlighter-rouge">call_user_func()</code></a> and <code class="highlighter-rouge">static::</code> method calls, which were both handled by the interpreter. Now we generate optimized machine code for each of those call types.</p>
  </li>
  <li>
    <p>Optimizing the layout of the HHVM binary. HHVM is a big program: the compiled C++ code of HHVM clocks in at just under 100 MB. The CPU’s caches work better when the hot code footprint is small, instead of spread out across the address space, so we put the hottest functions together in one part of the binary. For an extra boost to <a href="http://en.wikipedia.org/wiki/Translation_lookaside_buffer">I-TLB</a> performance, we then mapped that part using <a href="http://en.wikipedia.org/wiki/Page_%28computer_memory%29#Huge_pages">huge pages</a>.</p>
  </li>
  <li>
    <p>Using the interpreter to detect hot functions. HHVM interprets the first several requests to avoid wasting time and space compiling startup code. We added logic to the interpreter to find the hottest functions and compile them to a special part of the translation cache. Like the last optimization, this one improves code locality, this time for the dynamically generated code.</p>
  </li>
  <li>
    <p>Upgrading our regular expression library. Newer versions of <a href="http://www.pcre.org/">PCRE</a> include a JIT compiler for regular expressions, which gives HHVM a nice performance boost.</p>
  </li>
</ol>

<h2 id="hygiene">Hygiene</h2>

<p>I am sure you are thinking to yourself, “all these gains and statistics are nice and everything, but what about the beards?!?” Right, you then remember that in our <a href="http://www.hhvm.com/blog/1499/locking-down-for-performance-and-parity">beginning the lockdown</a> post that “shaving was discouraged”. I am happy to report that we also succeeded in maintaining a state of minimal facial hygiene throughout the lockdown. And here are the pictures to prove it.</p>

<p><img src="/static/images/posts/2013-11-22-16.11.241.jpg" alt="SaraG had a beard in spirit" /></p>
<center><i>SaraG had a beard in spirit</i></center>

<p><img src="/static/images/posts/2013-11-22-16.15.431.jpg" alt="The HHVM team has their razors in hand ready to clean up" /></p>
<center><i>The HHVM team has their razors in hand ready to clean up</i></center>

<h2 id="did-we-meet-our-goals">Did we meet our goals?</h2>

<p>Remember the three success vectors that were posed at the beginning of this blog post?</p>

<ol>
  <li>
    <p>Did we meet our parity improvement goals for the 21 open-source frameworks we tested against =&gt; 99% average unit test parity?</p>
  </li>
  <li>
    <p>Did we meet performance improvement goals =&gt; 15% across the board performance gain?</p>
  </li>
  <li>
    <p>Were the razors put away for the entirety of the three weeks?</p>
  </li>
</ol>

<p>Here are your answers:</p>

<ol>
  <li>
    <p><strong>Close YES!</strong> (using rounding to our advantage)</p>
  </li>
  <li>
    <p><strong>Resounding YES!</strong> (no rounding needed)</p>
  </li>
  <li>
    <p><strong>YES!</strong> Some of us are grayer than others.</p>
  </li>
</ol>

<h2 id="the-future-2014">The Future (2014)</h2>

<p>Performance improvements will always be a core mantra for the HHVM team. That said, parity will be 1A on the priority scale for the team. We really do care about open source and the PHP community. 2014 will be a year where we go to great lengths to make HHVM first-class when it comes to <strong>both</strong> performance and parity. More unit tests passing for more open source projects and frameworks. Real world testing for PHP code out in the wild. Stay tuned for further updates on our progress and plans. Until then, Happy Holidays and Happy New Year!</p>

    
      
      
        
          <h3> Comments </h3>
          <br/>
          <ul>
          
        
        <li><b>Yermo</b>: May I suggest, sometime during the 2014 push, putting some efforts into improving documentation? From a users&#47;developers point of view that's the largest drawback right now and I suspect is keeping quite a few people from trying the platform.  (It took me many many hours of trial and error to get the platform running my site.)

If more accessible and organized documentation were available, it would go a very long way to getting additional sites using the platform and would draw more help into the project.

I would suggest the same for development docs. While the code is very well organized it is largely devoid of comments and there's little in terms of overview documentation making it quite time consuming for someone to come in and contribute meaningfully to the project. It would also pay dividends by freeing the developers from having to answer so many repeat questions. :)</li>
      
        
        <li><b>juicybacon</b>: One question. Did the tests fail because some functions are not coded&#47;broken or just general runtime borkyness?</li>
      
        
        <li><b>Joel Marcey</b>: That is a high priority item for the HHVM team in 2014 and, actually, my personal #1 (or at least #1A) priority item. I will be diving neck deep into documentation come January.</li>
      
        
        <li><b>Nick</b>: Very impressed with how much effort is being put into this.  MUCH better than HipHop.  Keep up the good work!</li>
      
        
        <li><b>Yermo</b>: Excellent!</li>
      
        
        <li><b>Paul Tarjan</b>: Mostly some functions haven't been written yet, or don't behave the same way in corner cases.</li>
      
        
        <li><b>asad hasan</b>: Great Job!!! keep up the good work guys.</li>
      
        
        <li><b>Marco Pivetta</b>: I'm starting to introduce HHVM in all my build matrixes - works awesome except for edge cases! 

Keep up with the good work!</li>
      
        
        <li><b>Riku</b>: Very interested in this, keep up the good work guys!</li>
      
        
        <li><b>dandy</b>: This is good. but where is Wordpress?</li>
      
        
        <li><b>Louis</b>: I expect WordPress already has 100% or nearly so. When the HHVM blog first started, they gave plenty of instructions on how to get Wordpress running on HHVM. In addition, they use Wordpress to power the blog and they also use HHVM for the site. So... Wordpress is kind of a given ;-)</li>
      
        
        <li><b>Jeremy Wilson</b>: I'd like to see Redis and PostgreSQL support.</li>
      
        
        <li><b>Brandon DuRette</b>: WordPress is functional on HHVM, but the test suite is not at 100%. However, that's only part of the story. Plugins and themes in the WordPress ecosystem also depend on PHP parity. The testing matrix for the entire WP ecosystem blows up pretty quickly.</li>
      
        
        <li><b>Joel Marcey</b>: Yeah, we know Wordpress is quite important and quite popular. :) The reason it did not make the cut for this round was the more complicated configuration. The testing requires an extra config file + database setup and access. We tried to stick with popular frameworks that ran phpunit tests "straight out of the box" so to speak, with minimal configuration changes. Our test runner that we created and used didn't handle that case... but we will get it there. Mediawiki initially had this problem, but then they showed us an --exclude-group=Database option that we used. Btw, I am getting the unit tests for Wordpress from here: https:&#47;&#47;github.com&#47;kurtpayne&#47;wordpress-unit-tests which seemed to be the best mirror I could find on Github.</li>
      
        
        <li><b>Paul M. Jones</b>: I'd like to get the Aura components ( https:&#47;&#47;github.com&#47;auraphp&#47; ) included in this suite. How does one do so?

Many thanks to everyone involved here.</li>
      
        
        <li><b>Simon</b>: Redis support is already available and there's a <a href="https:&#47;&#47;github.com&#47;pocketRent&#47;hhvm-pgsql" rel="nofollow">PostgreSQL<&#47;a> extension you can use.</li>
      
        
        <li><b>Nitin</b>: You guys did a awesome Job !! I would suggest you to work on its documentation, This is the only thing HHVM needs. You Rock!</li>
      
        
        <li><b>Paul Tarjan</b>: Send us a pull request for the test script we linked to.</li>
      
        
        <li><b>Joel Marcey</b>: Documentation is high priority for the team in 2014, starting in January :-)</li>
      
        
        <li><b>wwbmmm</b>: 赞！</li>
      
        
        <li><b>Randall Helzerman</b>: Congrats on meeting your goals!   We don't do PHP, but we do have some big C++ programs; are there any generic tools optimizing the cache profile of your executable?  

How exactly did you guys do that?   Sounds like an interesting story, if its not a secret of the guild.</li>
      
        
        <li><b>Aris Setyawan</b>: Hi,

So a PHP framework which doesn't have PHPUnit base unit-testing, can't join HHVM parity test?</li>
      
        
        <li><b>Facebooks PHP-Compiler HipHop 2.3 schneller und kompatibler | Klaus Ahrens: News, Tipps, Tricks und Fotos</b>: [&#8230;] 2.3 hat HHVM jetzt in Sachen Kompatibilit&auml;t einen weiteren gro&szlig;en Schritt nach vorn gemacht und absolviert rund 98,58 Prozent aller Unit-Tests von 21 verschiedenen PHP-Projekten. Immer mehr der Open-Source-Projekte unterst&uuml;tzt HHVM zu 100 [&#8230;]</li>
      
        
        <li><b>Joeri</b>: Really nice to see hhvm improving. As someone who has been programming php professionally for almost a decade it's great to see all the refreshing new ideas going on now in the php landscape.

Are there plans to support oci8? I'm curious to see how hhvm handles our AutoCAD to SVG conversion code, but it's tied pretty deep to our oracle DB. I would also be interested to take our whole app for a spin, but it's 500 kloc of oracle-based code so again i can't do anything useful until there is oci8 support.</li>
      
        
        <li><b>CeBe</b>: Great news! Once travis-ci has fixed some issues with PHPUnit I am going to run <a href="https:&#47;&#47;github.com&#47;yiisoft&#47;yii" rel="nofollow">yii<&#47;a> and <a href="https:&#47;&#47;github.com&#47;yiisoft&#47;yii2" rel="nofollow">yii2<&#47;a> against hhvm again and will report all things that are stopping us from having 100% test passing! :-)</li>
      
        
        <li><b>Paul Tarjan</b>: When I cut 2.3.2 I'll include the fix for phpunit</li>
      
        
        <li><b>Bert Maher</b>: Yes!  We actually built a pretty nice toolchain for optimizing our binary layout, which we will (hopefully) write up here pretty soon.  I do have some hope that it will apply to other big executables besides HHVM.</li>
      
        
        <li><b>Kevin</b>: Running Drupal

http:&#47;&#47;translate.google.com&#47;translate?sl=auto&amp;tl=en&amp;js=n&amp;prev=_t&amp;hl=en&amp;ie=UTF-8&amp;u=http%3A%2F%2Fweb-rocker.de%2F2013%2F12%2Fdrupal-7-hhvm-vs-php-55-zend-opcache</li>
      
        
        <li><b>Darren L</b>: This seems pretty damn awesome and fun!</li>
      
        
        <li><b>Yii-Framework unter HHVM &rsaquo; isFett.com</b>: [&#8230;] Laut&nbsp;http:&#47;&#47;www.hhvm.com&#47;blog&#47;2813&#47;we-are-the-98-5-and-the-16 vom 19.12.2013 werden 99,11% aller Unit-Tests mit dem Yii-Framework fehlerfrei abgeschlossen. Ein Grund mehr sich hier die Performance-Unterschiede anzusehen. Daf&uuml;r erstellen wir ein kleines Test-Projekt. [&#8230;]</li>
      
        
        <li><b>Magento-Neuigkeiten der Wochen 51&#47;52 2013</b>: [&#8230;] nicht nur weiter an der Performance und Kompatibilit&auml;t geschraubt, es wurde auch Magento 2 in die Liste der getesteten Software aufgenommen. Au&szlig;erdem kann HHVM nun auch als FastCGI-Modul hinter einem herk&ouml;mmlichen Webserver [&#8230;]</li>
      
        
        <li><b>Grim</b>: How about symfony2? I try use hhvm fastcgi mode ,but it's not ok. How use symfony2 on hhvm?</li>
      
        
        <li><b>Sascha</b>: Can you clarify what tests you were running with Drupal and which version?

I currently have two failing PHPUnit tests, created an issue on our side to improve&#47;track HHVM compatibility: https:&#47;&#47;drupal.org&#47;node&#47;2165377</li>
      
        
        <li><b>HHVM HipHop Virtual Machine vs Apache2 |</b>: [&#8230;] Warum also nicht sofort komplett auf HHVM umstellen? Die Frage ist leicht beantwortet, da unter HHVM noch nicht alle Module und Plattformen kompatibel sind. Eine aktuelle &Uuml;bersicht findet ihr hier. [&#8230;]</li>
      
        
        <li><b>Ajinkya</b>: PHP is quite underrated, mostly from Java guys, but look at numbers, its the king.</li>
      
        
        <li><b>qianzhihe</b>: Great news!  thank you</li>
      
        
        <li><b>How will HHVM influence PHP? &laquo; {5} Setfive &#8211; Talking to the World</b>: [&#8230;] the last few weeks, there&#8217;s been a slew of HHVM related news from the &#8220;We are the 98.5%&#8221; post from the HHVM team to the Our HHVM Roadmap from the Doctrine team. With the increasing [&#8230;]</li>
      
        
        <li><b>Christopher Svanefalk</b>: Fantastic work guys! 

My company is already optimising our PHP codebase for full HHVM compatibility, and we plan to deploy it on our production servers before summer 2014.

You are doing great things for PHP and the community, and I very much look forward to see how HHVM will progress during the year :)</li>
      
        
        <li><b>ming</b>: Great stuffs.

BTW, your tests include phpmyadmin, but, I get only blank screen using the latest build running as fastcgi daemon?  Is there special configuration?</li>
      
        
        <li><b>Paul Tarjan</b>: There are fixed in trunk and not in the release that should make it work. Can you try the `hhvm-nightly` package and see if that works for you?</li>
      
        
        <li><b>Ming</b>: Thanks Paul. 

The nightly build works and seems mostly functional.  There is a segmentation fault and I will file that to the bugs forum.

Another question.  I understand that HHVM does not implement every modules and&#47;or drivers that PHP offers, how do I know what is &#47; is not included, and, is there any tools to check against the webapp codes?</li>
      
        
        <li><b>Paul Tarjan</b>: function_exists() is a nice to know, and if you like to trust docs you can try https:&#47;&#47;github.com&#47;facebook&#47;hhvm&#47;wiki&#47;Extensions</li>
      
        
        <li><b>Facebook HHVM 团队封闭开发三周的成果展 &#124; 我爱互联网</b>: [&#8230;] 　　英文原文：we-are-the-98-5-and-the-16 [&#8230;]</li>
      
        
        <li><b>HHVM: The Next Six Months &laquo; HipHop Virtual Machine</b>: [&#8230;] We&rsquo;ve been making steady progress on HHVM&rsquo;s compatibility&nbsp;with&nbsp;PHP&nbsp;in the wild, but we still have a lot of work ahead of us. We&rsquo;re using&nbsp;unit test pass rates&nbsp;as a proxy for success measurement, but you can help by&nbsp;adding HHVM to your Travis configuration, and reporting bugs and issues through&nbsp;GitHub. We are resourced&nbsp;to help support a couple of major HHVM deployments, which we hope has the side effect of exposing us to &#8220;non-Facebook&#8221; deployment and maintenance challenges. [&#8230;]</li>
      
        
        <li><b>Implementing MySQLi &laquo; HipHop Virtual Machine</b>: [&#8230;] After warming up with the parser, I was ready to start my big project: implement MySQLi. This has been a long requested feature for HHVM. And, this extension is required to help meet our compatibility goals. [&#8230;]</li>
      
        
        <li><b>Tracking Parity &laquo; HipHop Virtual Machine</b>: [&#8230;] runner are a nice representative sample of real world PHP (and we are adding more). We showed a static snapshot of our test parity to these frameworks late last year. As HHVM is continually developed, it is [&#8230;]</li>
      
        
        <li><b>赵伊凡&#8217;s blog：Facebook推出编程语言&mdash;&mdash;Hack | 赵伊凡&#039;s Blog</b>: [&#8230;] HHVM仍然是一个PHP运行平台，我们打算继续保持这种方式。事实上，我们正努力达到PHP-5的标准。其中HHVM的首要任务是能够运行未经修改的PHP 5的源代码，不仅是为了社区，也因为我们依赖许多第三方PHP底层库。 HHVM现在是一个能同时运行PHP和Hack的平台，所以你可以逐渐体验Hack所带来的新特性。 [&#8230;]</li>
      
        
        <li><b>Adeel Ahmad</b>: Although you have made progress with PHP compatibility, its a hard hitting fact that still you have to go a long way.  I am using HHVM and still it requires much to be done.</li>
      
        
        <li><b>PHP 6: Zend Engine oder HHVM? - entwickler.de</b>: [&#8230;] ohne Unterlass daran, die Abdeckung der wichtigsten Frameworks und Tools weiter zu steigern &ndash; zahlreiche Projekte sind bereits zu 100 Prozent mit der HHVM kompatibel. Doch auch die Projekte selbst unternehmen gro&szlig;e Anstrengungen, ihre Codebasis f&uuml;r HipHop zu [&#8230;]</li>
      
        
        <li><b>HHVM in der echten PHP-Welt - entwickler.de</b>: [&#8230;] runner are a nice representative sample of real world PHP (and we are adding more). We showed a static snapshot of our test parity to these frameworks late last year. As HHVM is continually developed, it is [&#8230;]</li>
      
        
        <li><b>Si desarrollas en PHP y tienes un rato, prueba HHVMSopa de bits</b>: [&#8230;] el pasado 19 de Diciembre se publicaba en el blog de HHVM un art&iacute;culo sobre la ejecuci&oacute;n de pruebas unitarias de diversos frameworks en HHVM. Desde el inicio de esas pruebas hasta el resultado final, la mejora ha sido notable en algunos [&#8230;]</li>
      
        
        <li><b>HHVM en Magento y SymfonySopa de bits</b>: [&#8230;] m&aacute;s estrellas en GitHub, es otro de los agraciados&nbsp;con la mejora de rendimiento. Adem&aacute;s de las mejoras publicadas en los tests del blog de HHVM, hay otras pruebas m&aacute;s b&aacute;sicas realizadas con ApacheBench. Digna de menci&oacute;n es esta [&#8230;]</li>
      
      
        </ul>
        <br/>
      
    
  
  </article>
</div>

</div>
  </div>
</div>


      </div>
      <div class="footerContainer">
  <div id="footer_wrap" class="wrapper footerWrapper">
    <div class="footerBlocks">
      <div id="fb_oss" class="footerSection fbOpenSourceFooter">
          <svg class="facebookOSSLogoSvg" viewBox="0 0 1133.9 1133.9" x="0px" y="0px">
            <g>
              <path class="logoRing outerRing" d="M 498.3 3.7 c 153.6 88.9 307.3 177.7 461.1 266.2 c 7.6 4.4 10.3 9.1 10.3 17.8 c -0.3 179.1 -0.2 358.3 0 537.4 c 0 8.1 -2.4 12.8 -9.7 17.1 c -154.5 88.9 -308.8 178.1 -462.9 267.5 c -9 5.2 -15.5 5.3 -24.6 0.1 c -153.9 -89.2 -307.9 -178 -462.1 -266.8 C 3 838.8 0 833.9 0 825.1 c 0.3 -179.1 0.2 -358.3 0 -537.4 c 0 -8.6 2.6 -13.6 10.2 -18 C 164.4 180.9 318.4 92 472.4 3 C 477 -1.5 494.3 -0.7 498.3 3.7 Z M 48.8 555.3 c 0 79.9 0.2 159.9 -0.2 239.8 c -0.1 10 3 15.6 11.7 20.6 c 137.2 78.8 274.2 157.8 411 237.3 c 9.9 5.7 17 5.7 26.8 0.1 c 137.5 -79.8 275.2 -159.2 412.9 -238.5 c 7.4 -4.3 10.5 -8.9 10.5 -17.8 c -0.3 -160.2 -0.3 -320.5 0 -480.7 c 0 -8.8 -2.8 -13.6 -10.3 -18 C 772.1 218 633.1 137.8 494.2 57.4 c -6.5 -3.8 -11.5 -4.5 -18.5 -0.5 C 336.8 137.4 197.9 217.7 58.8 297.7 c -7.7 4.4 -10.2 9.2 -10.2 17.9 C 48.9 395.5 48.8 475.4 48.8 555.3 Z" />
              <path class="logoRing middleRing" d="M 184.4 555.9 c 0 -33.3 -1 -66.7 0.3 -100 c 1.9 -48 24.1 -86 64.7 -110.9 c 54.8 -33.6 110.7 -65.5 167 -96.6 c 45.7 -25.2 92.9 -24.7 138.6 1 c 54.4 30.6 108.7 61.5 162.2 93.7 c 44 26.5 67.3 66.8 68 118.4 c 0.9 63.2 0.9 126.5 0 189.7 c -0.7 50.6 -23.4 90.7 -66.6 116.9 c -55 33.4 -110.8 65.4 -167.1 96.5 c -43.4 24 -89 24.2 -132.3 0.5 c -57.5 -31.3 -114.2 -64 -170 -98.3 c -41 -25.1 -62.9 -63.7 -64.5 -112.2 C 183.5 621.9 184.3 588.9 184.4 555.9 Z M 232.9 556.3 c 0 29.5 0.5 59.1 -0.1 88.6 c -0.8 39.2 16.9 67.1 50.2 86.2 c 51.2 29.4 102.2 59.2 153.4 88.4 c 31.4 17.9 63.6 18.3 95 0.6 c 53.7 -30.3 107.1 -61.2 160.3 -92.5 c 29.7 -17.5 45 -44.5 45.3 -78.8 c 0.6 -61.7 0.5 -123.5 0 -185.2 c -0.3 -34.4 -15.3 -61.5 -44.9 -79 C 637.7 352.6 583 320.8 527.9 290 c -27.5 -15.4 -57.2 -16.1 -84.7 -0.7 c -56.9 31.6 -113.4 64 -169.1 97.6 c -26.4 15.9 -40.7 41.3 -41.1 72.9 C 232.6 491.9 232.9 524.1 232.9 556.3 Z" />
              <path class="logoRing innerRing" d="M 484.9 424.4 c 69.8 -2.8 133.2 57.8 132.6 132 C 617 630 558.5 688.7 484.9 689.1 c -75.1 0.4 -132.6 -63.6 -132.7 -132.7 C 352.1 485 413.4 421.5 484.9 424.4 Z M 401.3 556.7 c -3.4 37.2 30.5 83.6 83 84.1 c 46.6 0.4 84.8 -37.6 84.9 -84 c 0.1 -46.6 -37.2 -84.4 -84.2 -84.6 C 432.2 472.1 397.9 518.3 401.3 556.7 Z" />
            </g>
          </svg>
        <h2>Facebook Open Source</h2>
      </div>
      <div class="footerSection">
        <a class="footerLink" href="https://code.facebook.com/projects/" target="_blank">开源项目</a>
        <a class="footerLink" href="https://github.com/facebook/" target="_blank">GitHub</a>
        <a class="footerLink" href="https://twitter.com/fbOpenSource" target="_blank">Twitter</a>
      </div>
      <div class="footerSection rightAlign">
        <a class="footerLink" href="https://github.com/hhvm-cn/hhvm-cn.com" target="_blank">帮助我们翻译</a>
      </div>
    </div>
  </div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-166019294-2', 'auto');
  ga('send', 'pageview');
</script>

    </div>
  </body>
</html>
